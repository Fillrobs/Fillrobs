window.c2={settings:{logging:{enabledModules:["accessibility"],level:"info"},urls:{}}},c2.go=function(e,t,n,a,i,o,r,l,s){if(c2.settings.CBLicenseID=e,c2.settings.mixpanelToken=t,c2.settings.CSRFToken=n,c2.settings.urls.static=a,c2.settings.urls.login=i,c2.settings.urls.logout=o,c2.settings.urls.activity=r,$.ajaxPrefilter((function(e,t,a){e.crossDomain||a.setRequestHeader("X-CSRFToken",n)})),$.ajaxSetup({error:function(e){console.log("    Ajax error occurred:",e),401==e.status&&(console.log("    401: session expired. Redirect to log in page."),window.location.replace(i+"?next="+encodeURI(window.location.pathname)))}}),s&&c2.inactivity.init(s,(function(){window.location.href=o+"?inactivity-timeout-minutes="+s}),r),l){var c=Intl.DateTimeFormat().resolvedOptions().timeZone;void 0!==c&&$.post("/detect_time_zone",{tz:c})}},$((function(){"use strict";c2.accessibility.init(),c2.include.loadAll(),c2.navbar.init(),c2.dataTables.init(),c2.dialogs.init(),c2.toggles.enablePostOnChange(),c2.commonEventHandlers.enablePostOnClick(),c2.commonEventHandlers.aceOnPanelOpen(),c2.commonEventHandlers.popovers(),c2.search.init(),c2.sparklines.init(),c2.tabs.init(),c2.tooltip.init(),c2.clipboard.init(),""!==c2.settings.mixpanelToken&&c2.mixpanel.init(),c2.commonEventHandlers.bindGlobalKeyHandlers(),$.fn.datepicker.defaults.autoclose=!0,$.fn.datepicker.defaults.format="yyyy-mm-dd",$.fn.datepicker.defaults.todayBtn=!0,$.fn.datepicker.defaults.todayHighlight=!0})),function(e,t,n){"use strict";function a(e){return Array.prototype.slice.call(e,0)}t.logging={getLogger:function(e){return!t.settings.logging.enabledModules||-1==t.settings.logging.enabledModules.indexOf("all")&&-1==t.settings.logging.enabledModules.indexOf(e)?{debug:function(){},info:function(){},warn:function(){},error:function(){}}:function(e){var n=t.settings.logging.level,i=e+": ";return{debug:function(){"debug"==n&&console.log.apply(console,[i].concat(a(arguments)))},info:function(){"info"!=n&&"debug"!=n||console.info.apply(console,[i].concat(a(arguments)))},warn:function(){"warn"!=n&&"info"!=n&&"debug"!=n||console.warn.apply(console,[i].concat(a(arguments)))},error:function(){console.error.apply(console,[i].concat(a(arguments)))}}}(e)}}}(0,window.c2,window.jQuery),function(e){"use strict";e.fn.clearable=function(n){var a=e.extend({},t,n);function i(e){var t=e.next();e.val()?t.show():t.hide()}function o(e){e.trigger("keydown").val("").trigger("keyup").trigger("change").focus()}return this.each((function(){var t=e(this);t.hasClass(a.inputClass)||(!function(t){var n,r=t.parent();t.addClass(a.inputClass),r.hasClass("input-group")?r.wrap('<span class="clearable-wrapper"></span>'):t.wrap('<span class="clearable-wrapper"></span>'),n=e('<span class="clearable-trigger">'+a.triggerHtml+"</span>"),t.after(n),i(t),n.click((function(e){o(t)}))}(t),t.keyup((function(e){i(t),"Escape"==e.key&&(o(t),e.stopPropagation())})))}))};var t={inputClass:"clearable",triggerHtml:'<span class="icon-delete"></span>'}}(jQuery),function(e){"use strict";e.fn.clickable=function(a){var i=e.extend({},t,a);return this.each((function(){var t,a,o,r,l,s=e(this).addClass(i.containerClass);if(s.data("prevBox",null),i.strategy)t=i.strategy;else for(var c in n){var d=n[c];if(d.isAppropriate(s)){t=d;break}}t=e.extend({},n.default,t),(o=t.findItems(s)).each((function(){a=e(this),(r=a.find("input:checkbox, input:radio")).length>1?console.log("Warning: the clickable plugin's behavior is not well defined for items with more than one checkbox or radio button"):r.prop("checked")&&a.addClass(i.selectedClass)})),o.off("click.clickable"),o.on("click.clickable",(function(n,a){l=e(n.target),n.altKey||n.metaKey||i.ignoreThisTarget(l)||(document.getSelection&&document.getSelection().removeAllRanges(),t.isClickable(l)&&function(t,n,a,i){var o=e(t.delegateTarget),r=o.find("input:radio, input:checkbox").first(),l=e(t.target),s=i.selectedClass;r.is(":radio")&&n.removeClass(s);l.is(r)||(r.prop("checked",!r.prop("checked")),r.trigger("change"));var c=r.prop("checked");o.toggleClass(s,c);var d=a.data("prevBox");if(r.is(":checkbox")&&d&&t.shiftKey){var u=n.find("input[type=checkbox]:first"),f=u.index(d),p=u.index(r);u.slice(Math.min(f,p),Math.max(f,p)).prop("checked",c);var g=d.closest(o[0].tagName),h=n.index(g),v=n.index(o);n.slice(Math.min(h,v),Math.max(h,v)).toggleClass(s,c)}a.data("prevBox",r),i.onSelect(t,a,o),l.is("label")&&t.preventDefault()}(n,o,s,i))}))}))},e.fn.clickable.forgetPrevClick=function(e){e.data("prevBox",null)};var t={containerClass:"clickable",selectedClass:"selected",onSelect:function(e,t,n){},ignoreThisTarget:function(e){return!1},strategy:null},n={default:{isAppropriate:function(e){return!1},findItems:function(e){return e.children()},isClickable:function(e){return e.is(":checkbox, :radio")||!e.is(":input, a")&&!e.parents("a").length&&!e.parents("label").length}},table:{isAppropriate:function(e){return"TABLE"===e.get(0).tagName},findItems:function(e){return e.find("tbody tr")}},list:{isAppropriate:function(e){var t=e.get(0).tagName;return"UL"===t||"OL"===t},findItems:function(e){return e.children("li")}}}}(jQuery),jQuery.fn.highlight=function(e){$(this).each((function(){var t=$(this),n=t.offset();$("<div/>").width(t.outerWidth()).height(t.outerHeight()).css({position:"absolute",left:n.left,top:n.top,"background-color":e||"#ffff99",opacity:".5","z-index":"9999999"}).appendTo("body").fadeOut(700).queue((function(){$(this).remove()}))}))},$.fn.selectText=function(){var e;return $(this).each((function(t,n){window.getSelection?(window.getSelection(),(e=document.createRange()).selectNodeContents(n),window.getSelection().removeAllRanges(),window.getSelection().addRange(e)):document.selection&&((e=document.body.createTextRange()).moveToElementText(n),e.select())}))},function(e){"use strict";var t=c2.logging.getLogger(e);c2[e]={init:function(e,n,a,i,o){function r(e,t,n,a,i,o){for(var r=function(e){return"string"==typeof e?1*e.replace(/[\$,]/g,""):"number"==typeof e?e:0},l=0,s=0;s<t.length;s++)l+=r(t[s][o]);$(e).find("th").eq(0).html("Total Estimated Savings: $"+l.toFixed(2))}c2.block.block(a),i.prop("disabled","disabled"),$.ajax({url:e,dataType:"html",type:"GET",success:function(e){a.html(e),$(n).dataTable({aaSorting:[[6,"desc"]],footerCallback:function(e,t,n,a,i){r(e,t,0,0,0,6)}}),c2.block.unblock(a),i.prop("disabled","")},error:function(e,n,o){t.debug("Error handling GET request: "+e+"  "+n+"  "+o),c2.block.unblock(a),i.prop("disabled","")}}),i.on("click",(function(l){l.preventDefault(),c2.block.block(a,!1),i.prop("disabled","disabled");var s=o.serializeArray();$.ajax({url:e,dataType:"html",type:"POST",data:s,success:function(e){$(n).DataTable().clear().destroy(),a.html(e),$(n).dataTable({aaSorting:[[6,"desc"]],footerCallback:function(e,t,n,a,i){r(e,t,0,0,0,6)}}),c2.block.unblock(a),i.prop("disabled","")},error:function(e,n,o){t.debug("Error handling POST request: "+e+"  "+n+"  "+o),c2.block.unblock(a),i.prop("disabled","")}})}))}}}("AWSReservedInstances"),function(e){c2.logging.getLogger(e);function t(){$("[data-alert=true]").each((function(){var e=$(this);n(e.text()),e.attr("data-alert",!1)}))}function n(e){$('<div class="sr-only" role="alert" aria-live="assertive"></div>').text(e).appendTo("body")}function a(e){$("#global-help-dialog").trigger("click"),e.preventDefault()}c2[e]={alert:n,alertAll:t,init:function(){var e={"?":a,h:a};e=function(e){var t='[data-topnav="help"] a.help-link';$(t).is(":visible")&&(e.d=function(e){$(t).first()[0].click(),e.preventDefault()});return e}(e),c2.commonEventHandlers.registerGlobalKeyHandlers("accessibility",e),$('a[href^="#"]').on("click",(function(e){var t=this.href.split("#")[1];t&&$("#"+t).attr("tabindex",-1).on("blur focusout",(function(){$(this).removeAttr("tabindex")})).focus().blur()})),setTimeout((function(){t()}),1e3)}}}("accessibility"),function(e){"use strict";var t=c2.logging.getLogger("ace"),n=ace.require("ace/ext/language_tools"),a=String.fromCharCode(10),i="# PowerShell doesn't need a shebang since CB'll append a .ps1 file extension.",o=[{caption:"SH",name:"sh"},{caption:"Go",name:"golang"},{caption:"Perl",name:"perl"},{caption:"Powershell",name:"powershell"},{caption:"Python",name:"python"},{caption:"Ruby",name:"ruby"}];function r(e,t,n){$.ajax({url:"/actions/"+e+"/edit_code/",type:"POST",data:{file_content:n},success:function(e){$("#"+t+"-save_button").attr("disabled",!0),$("#"+t+"-save_button").text("Saved!"),$("#"+t+"-revert-code").removeClass("hidden"),$("#"+t+"-show_ootb_link").removeClass("disabled"),$("#"+t+"-show_ootb_link").css("cursor","pointer"),$("#"+t+"-show_ootb_link").off("click"),$("#"+t+"-show_ootb_link").click((function(){c2.ace.toggleOotbCode("#action-source-code-"+t)})),$("#"+t+"-show_ootb_link").attr("data-original-title","yourText"),c2.alerts.addGlobalAlert(e,"success",!0)},error:function(e){c2.alerts.addGlobalAlert(e.responseText,"error",!0)}})}function l(e){return function(t){"insert"==t.action&&(-1!=e.getValue().search(a)&&(e.find(a),e.replaceAll("")))}}function s(e){var t="#"+e.id+"-objects",n="#"+e.id+"-attrs",a=$(t),i=$(n);c2.combobox.chain(t,n,"/context_attrs_for_object/<%=value%>/",{allowEmptyOption:!1,plugins:{}},{valueField:"value",labelField:"label"}),i.on("change",(function(){e.oneLineMode&&e.getSession().off("change"),e.insertSnippet(i.val()),e.oneLineMode&&e.getSession().on("change",l),a[0].selectize.setValue("");var t=i[0].selectize;t.setValue(""),t.disable(),t.clearOptions(),e.focus(),e.setReadOnly(!1)}))}function c(e,t,n){t=t||"ace/mode/python",n=n||!1,e.getSession().setMode(t);var a=document.getElementById(e.id+"-other-langs"),r=document.getElementById(e.id+"-language");a.addEventListener("change",(function(){!function(e,t,n){if(!0===n.checked){f(t,ace.require("ace/ext/modelist").modes)}else f(t,o);d(e,t)}(e,r,a)})),r.addEventListener("change",(function(){d(e,r)}),!0),f(r,o),""===e.getValue()&&(n?(u(r,"powershell"),e.setValue(i,1)):e.setValue("#!/usr/bin/env bash\n",1))}function d(e,n){var a="ace/mode/"+n.value;if(""!==e.getValue());e.getSession().setMode(a),t.debug("Set editor "+e.id+" mode to: "+a)}function u(e,t){for(var n,a=e.options,i=0;n=a[i];i++)if(n.value==t){e.selectedIndex=i;break}}function f(e,t){var n,a,i=e.length;for(n in i&&(a=e.value,function(e){var t;for(t=e.options.length-1;t>=0;t--)e.remove(t)}(e)),t){var o=document.createElement("option");o.text=t[n].caption,o.value=t[n].name,e.add(o)}i&&u(e,a)}c2.ace={init:function(e,n,a){var i=e||"editor",o=$("#"+i),r=o.val&&o.val(),s=o.html&&o.html();a=(a||r||s||"").trim();var c=(n=n||{}).compact||!1,d=n.oneLine||!1,u=void 0===n.curstorAtStart||n.cursorAtStart?1:-1,f=_.defaults(n.aceOptions||{},{enableBasicAutocompletion:!0,mode:"ace/mode/python",theme:"ace/theme/chrome"});c&&(f.showPrintMargin=!1,f.showGutter=!1),d&&(f.highlightActiveLine=!1,a=a.replace(/[\r\n]/g,"")),t.debug("Initializing editor #"+i+" with aceOptions ",f);var p=ace.edit(i);return p.id=i,p.oneLineMode=d,p.setOptions(f),p.$blockScrolling=1/0,p.setWrapBehavioursEnabled(!1),d&&p.getSession().on("change",l(p)),p.setValue(a,u),p},initializeAceInPanel:function(e){var t;e.find("textarea.ace-lg").each((function(){if(!(t=$(this)).data("aceInitialized")){t.data("aceInitialized",!0);var e=t.attr("id"),n=t.attr("hook_id"),a=null;if($("#"+e+"-save_button").length>0){var i=c2.ace.init(e,{aceOptions:{readOnly:!1}});-1==e.indexOf("ootb")&&(c(i),s(i)),i.on("change",(function(t){a=i.getValue(),$("#"+e+"-save_button").attr("disabled",!1),$("#"+e+"-save_button").text("Save Code")})),$("#"+e+"-save_button").click((function(){r(n,e,a)}))}else c2.ace.init(e,{aceOptions:{readOnly:!0}})}}))},autoHeightAceInModal:function(e){function t(){var e=$(".modal-dialog"),t=e.find(".ace_editor");if(t.length){var n=e.height()-t.height();t.css({height:"calc(100vh - "+n+"px - 4rem)","min-height":"12rem"})}}e="#"+(e||"dialog-modal"),t(),$(e).on("shown.bs.modal",(function(){t()}))},saveUpdatedCode:r,addCompleter:n.addCompleter,setupLanguages:c,setupSnippets:s,toggleOotbCode:function(e){var t=$(e),n=t.find(".show-or-hide"),a=t.find(".source-code-row"),i=a.children("div");"Show"===n.text()?(n.text("Hide"),a.addClass("row"),i.addClass("col-sm-6"),i.first().children("h5").first().show(),i.last().show()):(n.text("Show"),a.removeClass("row"),i.removeClass("col-sm-6"),i.first().children("h5").first().hide(),i.last().hide())}}}(),function(e){"use strict";var t=[],n=c2.logging.getLogger(e);function a(){var e,n=$("#alert-box");t=[],n.find("div.alert").each((function(){(e=$(this)).fadeOut(1e3,(function(){e.remove()}))}))}c2.alerts={addGlobalAlert:function(e,i,o,r){var l,s="alert ",c="",d=$("#alert-box");!0===o&&(s+="alert-dismissable",c='<button type="button" class="close" data-dismiss="alert"  title="Dismiss this notification"><i class="fas fa-times"></i></button>'),-1==t.indexOf(e)&&(n.debug("Alert msg: "+e),t.push(e),(l=$('<div class="'+s+" "+function(e){return"error"===e?"alert-danger":"alert-"+e}(i)+'">'+c+e+"</div>")).hide(),d.prepend(l),l.css("opacity",0).slideDown(400).animate({opacity:1},{queue:!1,duration:400}),setTimeout((function(){c2.accessibility.alert(e)}),100)),r&&setTimeout(a,r)},clearGlobalAlerts:a}}("alerts"),function(e){"use strict";window.c2.animation={isSupported:function(){var e=!1,t=document.getElementsByTagName("body")[0],n="Webkit Moz O ms Khtml".split(" ");if(void 0!==t.style.animationName&&(e=!0),!1===e)for(var a=0;a<n.length;a++)if(void 0!==t.style[n[a]+"AnimationName"]){e=!0;break}return e}}}(),function(e){"use strict";e.block={block:function(e,t){var n,a=void 0===e,i=$(a?"body":e),o=i.find("> .blocker");0===o.length&&(o=$('<div class="blocker fade">  <div class="dead-center-container">    <div class="dead-center-content">    </div>  </div></div>').appendTo(i)),n=t?'<div class="spinner-inline">  <div></div>  <div></div>  <div></div>  <div></div>  <div></div></div>':'<div class="spinner"></div>',o.find(".dead-center-content").html(n),a?o.css({position:"fixed"}):i.css({position:"relative",overflow:"hidden"}),document.body.offsetWidth,o.addClass("in")},unblock:function(e){$(e||"body").find("> .blocker").removeClass("in")}}}(window.c2),function(e){"use strict";var t,n,a,i,o,r,l,s,c,d,u={},f=c2.logging.getLogger(e);function p(e,t){var n=$("#sortButtons"),a=(n.find("label").removeClass("active"),n.find('input[value="'+e+'"]').closest("label"));a.addClass("active");var i=a.find("i[data-desc]"),o=a.find("i[data-asc]");t?(o.hide(),i.show()):(o.show(),i.hide())}var g=$.debounce(100,y);function h(e,n,a){var i=e.getValue();if(""===i||0===i.length){var o=function(){var e,n={groups:[],environments:[],labels:[]};return t.filter(".shuffle-item--visible").each((function(t){e=u[$(this).data("id")],n.groups=_.union(n.groups,e.groups),n.environments=_.union(n.environments,e.environments),n.labels=_.union(n.labels,e.labels)})),f.debug("combinedData:",n),n}();f.debug("updateDropdownChoices new "+n+" values:",o[n]),function(e,t,n){e.clearOptions(),_.forEach(_.keys(n),(function(a){a=parseInt(a),_.contains(t,a)&&e.addOption({value:a,text:n[a]})})),e.refreshOptions(!1)}(e,o[n],a)}else f.debug("  Skipping; user already chose something")}function v(){h(n,"groups",l)}function m(){h(a,"environments",s)}function b(){h(i,"labels",c)}function w(){return{group:parseInt(n.getValue()),env:parseInt(a.getValue()),labels:_.filter(i.getValue(),(function(e){return parseInt(e)})),osFamily:(e=r.filter(":checked").val(),e?parseInt(e):null),searchTerm:o.val().toLowerCase()};var e}function y(){var e=w(),t=0;d.filter((function(n,a){var i=$(n),o=u[i.data("id")],r=e.group&&_.contains(o.groups,e.group),l=e.env&&_.contains(o.environments,e.env),s=e.osFamily&&_.contains(o.familyIDs,e.osFamily),c=!1,d=!1;return e.labels.length&&(c=_.every(e.labels,(function(e,t,n){return _.contains(o.labels,parseInt(e))}))),e.searchTerm&&(d=-1!==o.name.indexOf(e.searchTerm)||-1!==o.desc.indexOf(e.searchTerm)),!(e.group&&!r||e.env&&!l||e.osFamily&&!s||e.labels.length&&!c||e.searchTerm&&!d)&&(t+=1,!0)})),$("#tooltip-container").html("");var n=Object.keys(u).length;!function(e,t){var n;e!=t?(n=gettext("Showing %(matchingCount)s of %(totalCount)s blueprints available to you."),n=interpolate(n,{matchingCount:e,totalCount:t},!0),n+=' &nbsp;&nbsp; <button id="clear-filters" class="btn btn-default btn-sm">'+gettext("Clear filters")+'<span class="icon-delete"></span></button>'):(n=ngettext("Showing the %(count)s blueprint available to you.","Showing all %(count)s blueprints available to you",t),n=interpolate(n,{count:t},!0));$("#showing-msg").html(n)}(t,n),function(){var e=w();localStorage.setItem("catalogFilterGroup",e.group),localStorage.setItem("catalogFilterEnv",e.env),localStorage.setItem("catalogFilterLabels",e.labels),localStorage.setItem("catalogFilterOSFamily",e.osFamily),localStorage.setItem("catalogFilterSearchTerm",e.searchTerm)}()}function k(){localStorage.removeItem("catalogFilterGroup"),localStorage.removeItem("catalogFilterEnv"),localStorage.removeItem("catalogFilterOSFamily"),localStorage.removeItem("catalogFilterLabels"),localStorage.removeItem("catalogFilterTextSearch"),n.setValue(""),a.setValue(""),i.setValue(""),o.val(""),r.filter("input").prop("checked",!1).closest("label").removeClass("active"),y(),v(),m(),b()}function x(e,t,n){var a=e.data("href");f.debug("url:",a),f.debug("newTab:",n);var i=$("[name=filter_by_group]").val(),o=$("[name=filter_by_env]").val();(i||o)&&(a+="?",a+=i?"group="+i+"&":"",a+=o?"env="+o:"");var r=$(t.target).parent("a.manage-link");r.length&&(a=r.attr("href")),(e.hasClass("orderable")||r.length)&&(n?window.open(a,"_blank"):window.location.href=a)}c2.blueprints={initCatalog:function(e){var t=$("#blueprint-list"),n=$(".blueprint-card");c2.buttonTabs.init(),c2.blueprints.initFilters(n,e),$("#catalog-filters").fadeIn(),c2.blueprints.handleCardClicks(t)},initFilters:function(e,h){t=e,s=h.env_names_by_id,l=h.group_names_by_id,c=h.label_names_by_id,n=c2.selectize("select[name=filter_by_group]",{onChange:function(e){y(),e&&(m(),b())},options:h.group_options,placeholder:gettext("Any group")}),a=c2.selectize("select[name=filter_by_env]",{onChange:function(e){y(),e&&(v(),b())},options:h.env_options,placeholder:gettext("Any environment")}),i=c2.selectizeMultiple("select[name=filter_by_label]",{onChange:function(e){y(),e&&(v(),m())},options:h.label_options,placeholder:gettext("Any label"),plugins:["remove_button"]}),0===Object.keys(h.label_names_by_id).length&&i.$wrapper.hide(),o=$('input[name="text_search"]').clearable().on("keyup",g),r=$("input[name=filter_by_os_family]").on("change",(function(e){var t=$(this).closest("label");t.hasClass("active")&&setTimeout((function(){t.removeClass("active")}),0),y(),v(),m(),b()})),$("#showing-msg").on("click","#clear-filters",k),d=new Shuffle(document.querySelector("#blueprint-list"),{filterMode:Shuffle.FilterMode.ALL,itemSelector:".blueprint-card"}),function(){var e={sequence:function(e){return e.getAttribute("data-sequence")},name:function(e){return e.getAttribute("data-name")}},t=localStorage.getItem("catalog-sort-by")||"sequence",n=localStorage.getItem("catalog-sort-reverse")||!1;n&&(n=JSON.parse(n));d.sort({by:e[t],reverse:n}),p(t,n),$("#sortButtons label").on("click",(function(t){var n=$(this),a=0!==n.find("i[data-asc]:visible").length,i=n.hasClass("active")&&a,o=n.find("input").val();d.sort({by:e[o],reverse:i}),p(o,i),localStorage.setItem("catalog-sort-by",o),localStorage.setItem("catalog-sort-reverse",i)}))}(),e.each((function(e){var t=$(this);u[t.data("id")]={id:t.attr("id"),name:(t.data("name")||"").toLowerCase(),desc:(t.data("description")||"").toLowerCase(),groups:t.data("groups"),labels:t.data("labels"),environments:t.data("environments"),familyIDs:t.data("os-family-ids")}})),function(){var e=localStorage.getItem("catalogFilterGroup"),t=localStorage.getItem("catalogFilterEnv"),o=localStorage.getItem("catalogFilterLabels"),l=localStorage.getItem("catalogFilterOSFamily"),s=localStorage.getItem("catalogFilterSearchTerm");e&&n.setValue(e);t&&a.setValue(t);o&&(f.debug("restore labels filter to:",o),_.forEach(o.split(","),(function(e){i.addItem(parseInt(e.trim()))})));if(l){var c=r.filter("[value="+l+"]");c.prop("checked",!0),c.closest("label").addClass("active")}s&&$("input[name=text_search]").val(s)}(),y()},handleCardClicks:function(e){e.off("mousedown",".blueprint-card, .resource-card"),e.off("click",".blueprint-card, .resource-card"),e.on("mousedown",".blueprint-card, .resource-card",(function(e){var t=$(this),n=2==e.which;n&&(e.preventDefault(),x(t,e,n))})),e.on("click",".blueprint-card, .resource-card",(function(e){e.preventDefault(),x($(this),e,e.metaKey||e.ctrlKey)}))},renumberParallelItems:function(e){var t,n,a,i;e.find(".panel").each((function(){if(t=$(this),i=t.closest("li").next().find(".panel")){if(n=parseInt(t.find(".sort-seq").text(),10),!(a=i.find(".sort-seq")).length)return;t.find("input[name=execute_in_parallel]").prop("checked")?a.text(n):a.text(n+1)}}))}}}("blueprints"),function(e){"use strict";var t,n;c2.logging.getLogger(e);function a(){var e=window.location.href.split(window.location.host)[1];$.post(t.find("[data-add-bookmark]").attr("href"),{title:document.title,url:e},(function(e){e&&e.success?($("#tooltip-container").html(""),c2.include.reload(n),i(t),t.highlight("#d0e9c6")):t.highlight("#faf2cc")}))}function i(e){(n=(t=e).find("#bookmarks-submenu")).data("include",n.data("reload-url")),c2.navbar.closeSubMenu(t),t.off(".bookmarks"),c2.commonEventHandlers.registerGlobalKeyHandlers("bookmarks",{".":function(e){a(),e.preventDefault()},g:function(e){c2.navbar.isSubMenuOpen(t)?c2.navbar.closeSubMenu(t):(c2.navbar.openSubMenu(t),window.scroll(0,0)),e.preventDefault()}}),t.on("click.bookmarks","[data-add-bookmark]",(function(e){e.preventDefault(),a()})),t.on("click.bookmarks","[data-delete-bookmark]",(function(e){e.preventDefault(),$.post($(this).attr("href"),{},(function(e){c2.include.reload(n),i(t)}))})),t.on("keydown.bookmarks",(function(e){if(c2.navbar.isSubMenuOpen(t)){var n=e.which||e.keyCode;n>=48&&n<=57||n>=96&&n<=105?(c2.navbar.closeSubMenu(t),a=String.fromCharCode(n),(i=$("#bookmarks-submenu a.bookmark")[a-1])&&i.href?(c2.block.block(),window.location=i.href):c2.navbar.closeSubMenu(t),e.preventDefault()):"Escape"==e.key&&(c2.navbar.closeSubMenu(t),e.preventDefault())}var a,i}))}c2.bookmarks={init:i}}("bookmarks"),function(e){"use strict";var t=c2.logging.getLogger(e),n=!0,a=function(){return"c2.button-tabs.active."+window.location.pathname};function i(e){if(""===e)return!1;var t=$("#"+e),n=$('[data-toggle=button-tabs] a[href="#'+e+'"]');return $("[data-toggle=button-tabs] a").removeClass("active"),n.addClass("active"),t.closest(".tab-content").find(".tab-pane").removeClass("active"),t.addClass("active"),!!n.length}c2.buttonTabs={init:function(){var e,o=$("[data-toggle=button-tabs]").first();"off"===o.data("buttontabs-persist")&&(t.debug("persistence to localStorage disabled for all buttonTabs on page"),n=!1),o.on("click",".btn",(function(e){e.preventDefault();var t=$(this),o=$(t.attr("href")).attr("id");i(o),function(e){history.replaceState&&history.replaceState({},"","#"+e)}(o),n&&function(e){var t=a();localStorage.setItem(t,e)}(o)})),i(location.hash.slice(1))||n&&(e=a(),i(localStorage.getItem(e)))}}}("buttonTabs"),function(e,t){"use strict";e.catalogList={init:function(n,a){a(n),t((function(){var a=void 0;function i(i,o){i=void 0===i?1e3:i,e.block.block("ol.tile-list");var r=new Date;a=r,void 0===o?o=window.location.origin+window.location.pathname+"?":o+="&",setTimeout((function(){a.getTime()===r.getTime()&&(window.location.href=o+function(){var e={},a=t("#catalog-search").val();void 0!==a&&""!==a&&(e.q=a);var i=t("#options--grid-sort").val();void 0!==i&&(e.sort=i);var o=t("aside.catalog-filters input:checked").map((function(){return this.id.replace("filter-","")})).toArray().join(",");void 0!==o&&""!==o&&(e.filters=o);var r=t("#viewing-modes-group").val();if("undefined"!==r&""!==r?(e.viewing_mode=r,"table"===r&&(e.filters="")):e.view_mode=n,"categories"===n){var l=t(".category__item.selected").attr("id");e.filters=l&&"undefined"!==l?l:""}return Object.keys(e).map((function(t){return[t,e[t]].join("=")})).join("&")}())}),i)}t(".category__item").click((function(){event.preventDefault(),t(this).addClass("selected"),i()})),t("#filters-active--list li a.catalog-icon-close").on("click",(function(){event.preventDefault();var e=t(this).attr("filterid");return t(this).parent("li").remove(),t("aside.catalog-filters input#filter-"+e).prop("checked",!1),i(),!1})),t(".filter--head a.catalog-icon-close-dark").on("click",(function(){return event.preventDefault(),t("#filters-active--list li").remove(),t("aside.catalog-filters input").prop("checked",!1),i(0),!1})),t("aside.catalog-filters input").on("click",(function(){i()})),t("select#options--grid-sort").change((function(){"{{sort}}"!=t(this).val()&&i(0)})),t("a.nav-link").on("click",(function(){return event.preventDefault(),i(0,this.href),!1})),t("#catalog-search").on("keyup",(function(){i()})),t("form.form--grid-search").on("submit",(function(){return i(0),!1})),t("button.view-mode").on("click",(function(){this.parentElement.value=this.value,i()}))}))}}}(window.c2,window.jQuery);var globalMaxPointWidth=40;!function(e,t,n,a){"use strict";var i,o;function r(e){var t,a;return 0===e.length||0==(a=function(e){var t,a,i,o=0;if(0==(a=(t=n.without(e,null)).length))return 0;for(i=0;i<a;i++)o+=t[i];return o}(t=n.without(e,null)))||0==t.length?0:a/t.length}function l(e,t){return["","null"].includes(e)?null:parseFloat(e)/t}function s(t){var n=t.getSVG(),a=parseInt(n.match(/width="([0-9]+)"/)[1]),i=parseInt(n.match(/height="([0-9]+)"/)[1]),o=document.createElement("canvas");o.setAttribute("width",a),o.setAttribute("height",i),o.getContext&&o.getContext("2d")?(canvg(o,n),e.downloads.startDownload(o.toDataURL("image/png"),t.options.exporting.filename+".png")):alert("Your browser doesn't support this feature. Please use a modern browser that supports the canvas element.")}o=(i=a).each,i.wrap(i.seriesTypes.column.prototype,"drawPoints",(function(e){var t=this,n=void 0===typeof t.options.maxPointWidth?globalMaxPointWidth:t.options.maxPointWidth;if(t.data.length>0){var a=t.barW>n?n:t.barW;o(this.data,(function(e){e.shapeArgs.x+=(e.shapeArgs.width-a)/2,e.shapeArgs.width=a}))}e.call(this)}));var c={buttons:{contextButton:{menuItems:[{text:gettext("Print"),onclick:function(){this.print()}},{separator:!0},{text:gettext("Export as PNG Image"),onclick:function(){s(this,this.options.exporting.filename)}},{text:gettext("Export as CSV"),onclick:function(){e.downloads.startDownloadFromContent(this.options.exporting.toCSV(),this.options.exporting.filename+".csv")}}]}}},d={subtitle:{text:gettext("Includes all servers in groups you have permission to view.")},yAxis:{title:{text:gettext("Number of Servers")}},series:[{name:gettext("Servers"),maxPointWidth:40}],chart:{type:"bar"},plotOptions:{bar:{dataLabels:{enabled:!0}}},tooltip:{pointFormat:"{series.name}: <b>{point.y}</b>"},legend:{enabled:!1},credits:{enabled:!1},exporting:c},u={plotOptions:{pie:{allowPointSelect:!0,cursor:"pointer",dataLabels:{enabled:!0,color:"#000000",connectorColor:"#000000",formatter:function(){return"<b>"+this.point.name+"</b>: "+this.point.y+gettext(" servers")}}}},subtitle:{text:gettext("Includes all servers in groups you have permission to view.")},tooltip:{pointFormat:"{series.name}: <b>{point.percentage:.1f} %</b>"},legend:{enabled:!1},credits:{enabled:!1},exporting:c},f={title:{text:""},yAxis:{labels:{format:"${value:.2f}"},title:{text:"Cost (USD)"}},xAxis:{type:"datetime",tickInterval:5,labels:{format:"{value:%e %b %Y}"}},tooltip:{headerFormat:"<b>{point.x:%e %b %Y}</b> <br>",pointFormat:"{series.name}: <b>${point.y:.2f}</b>"},series:{type:"spline"},credits:{enabled:!1},exporting:c,chart:{zoomType:"xy"}},p={chart:{zoomType:"xy"},title:{text:""},xAxis:{type:"datetime",tickPixelInterval:150},yAxis:{labels:{format:"{value} %",style:{color:"#335b83"}},title:{text:gettext("Percentage"),style:{color:"#335b83"}}},credits:{enabled:!1},exporting:{enabled:!1}};function g(e,t,a,i,o){var s,c,d,u,f=[],p=1e3*t,g={};if(o)var h=100;else h=1;for(s=0;s<a.length;s++){for(d={x:e+s*p,y:l(a[s],h),marker:{enabled:!1}},c=0;c<i.length;c++)u=i[c],d.x>u.epoch_ms&&(d.marker={enabled:!0,fillColor:"#393",lineColor:"#060",radius:10,symbol:"diamond"},g[d.x]=u,i.splice(c,1));f.push(d)}return{data:f,eventAtTime:g,average:r(n.map(f,"y"))}}function h(e,t){return{formatter:function(){var i="<b>"+a.dateFormat("%b %e %Y at %H:%M:%S",this.x)+"</b>";if(n.forEach(this.points,(function(e){i+=t?"<br/>"+e.series.name+": <b>"+e.y+"% </b>":"<br/>"+e.series.name+": <b>"+e.y+"</b>"})),void 0!==e.eventAtTime[this.x]){var o=e.eventAtTime[this.x];i+='<div class="chart-tip event-tip">',i+="Event: <b>"+o.type+"</b><br/>",i+="Owner: <b>"+o.owner_html+"</b><br/>",i+="Job: <b>"+o.job_html+"</b><br/>",i+="<p>"+o.message+"</p>",i+="</div>"}return i},useHTML:!0,shared:!0}}e.charts={exportChartAsPNG:s,serverBarChartDefaults:d,serverPieChartDefaults:u,billingSeriesDefaults:f,commonStatChartOpts:p,diskStatChartOpts:{chart:{zoomType:"xy"},title:{text:""},xAxis:{type:"datetime",tickPixelInterval:150},yAxis:{labels:{format:"{value} kB/s",style:{color:"#335b83"}},title:{text:"Disk I/O (in kB/s)",style:{color:"#335b83"}}},credits:{enabled:!1},exporting:{enabled:!1}},netStatChartOpts:{chart:{zoomType:"xy"},title:{text:""},xAxis:{type:"datetime",tickPixelInterval:150},yAxis:{labels:{format:"{value} kB/s",style:{color:"#335b83"}},title:{text:"Throughput (in kB/s)",style:{color:"#335b83"}}},credits:{enabled:!1},exporting:{enabled:!1}},getCategoriesAsDates:function(e){var t,n=Array(),a=e.length;for(t=0;t<a;t++)n[t]=new Date(e[t]);return n},containerHeight:function(e){var t=(e<40?30:e<80?20:15)*e;return t<400&&(t=400),t},buildSeriesFromObject:function(e,t){var n=[],a=0;for(var i in e){var o=e[i],r={name:i,type:t,marker:{enabled:!1},data:function(){var e,t=[],n=o.length;for(e=0;e<n;e++)t.push({x:e,y:o[e]});return t}()};n[a]=r,a++}return n},buildGroupBillingBarSeries:function(e){var t=[],n=0;for(var a in e){var i=e[a],o={name:a,data:function(){var e,t=[],n=i.length;for(e=0;e<n;e++)t.push(i[e]);return t}()};t[n]=o,n++}return t},buildServerBillingSeries:function(e){return[{showInLegend:!1,name:"Daily Total",type:"spline",marker:{enabled:!1},data:function(){var t,n=[],a=e.length;for(t=0;t<a;t++)n.push({x:t,y:e[t]});return n}()}]},distributeMonochromePieColors:function(e){return a.getOptions().plotOptions.pie.colors=function(){var t,n,i=[],o=a.getOptions().colors[0],r=e?(.4- -.2)/e:1;for(t=0,n=-.2;t<e;t+=1,n+=r)i.push(a.Color(o).brighten(n).get());return i}(),a.getOptions().plotOptions.pie.colors},drawServerCPUStatsChart:function(e,a,i,o,r){void 0===i&&(i=[]);var l=g(e,a,i,n.sortBy(o,"epoch_ms"),!0);t("#cpu-container").highcharts(n.merge({subtitle:{text:gettext("CPU Stats")},series:[{name:"Usage",color:"#335b83",type:"line",data:l.data},{name:"Average",color:"#4a9de4",type:"spline",marker:{enabled:!1},data:function(){var e,t=[],n=l.data.length;for(e=0;e<n;e++)t.push({x:l.data[e].x,y:Math.round(100*l.average)/100});return t}()}],tooltip:h(l,!0)},r))},drawServerMemStatsChart:function(e,a,i,o,r){void 0===i&&(i=[]);var l=g(e,a,i,n.sortBy(o,"epoch_ms"),!0);t("#mem-container").highcharts(n.merge({subtitle:{text:gettext("Memory Stats")},series:[{name:"Usage",color:"#335b83",type:"line",data:l.data},{name:"Average",color:"#4a9de4",type:"spline",marker:{enabled:!1},data:function(){var e,t=[],n=l.data.length;for(e=0;e<n;e++)t.push({x:l.data[e].x,y:Math.round(100*l.average)/100});return t}()}],tooltip:h(l,!0)},r))},drawServerDiskStatsChart:function(e,a,i,o,r){void 0===i&&(i=[]);var l=g(e,a,i,n.sortBy(o,"epoch_ms"),!1);t("#disk-container").highcharts(n.merge({subtitle:{text:gettext("Disk Stats")},series:[{name:"Rate",color:"#335b83",type:"line",data:l.data},{name:"Average",color:"#4a9de4",type:"spline",marker:{enabled:!1},data:function(){var e,t=[],n=l.data.length;for(e=0;e<n;e++)t.push({x:l.data[e].x,y:l.average});return t}()}],tooltip:h(l,!1)},r))},drawServerNetStatsChart:function(e,a,i,o,r){void 0===i&&(i=[]);var l=g(e,a,i,n.sortBy(o,"epoch_ms"),!1);t("#net-container").highcharts(n.merge({subtitle:{text:gettext("Network Stats")},series:[{name:"Throughput",color:"#335b83",type:"line",data:l.data},{name:"Average",color:"#4a9de4",type:"spline",marker:{enabled:!1},data:function(){var e,t=[],n=l.data.length;for(e=0;e<n;e++)t.push({x:l.data[e].x,y:l.average});return t}()}],tooltip:h(l,!1)},r))},drawStorageChart:function(a){console.log(a);var i,o=[],r=[];n.forEach(a,(function(e){i=t(e[1]).find(".hostname").text(),o.push(i),r.push(e[2])}));var l=400;o.length>25&&(l=600),t("#chart_div").highcharts(n.merge(e.charts.serverBarChartDefaults,{chart:{height:l},plotOptions:{series:{animation:!1}},title:{text:gettext("Servers by storage")},xAxis:{categories:o},yAxis:{title:{text:gettext("Storage in GB")}},series:[{name:gettext("Storage in GB"),data:r}],exporting:{enabled:!1}}))},bar:function(e,t){var a=d;e.highcharts(n.merge(a,t))},pie:function(e,t){var a={plotOptions:{chart:{type:"pie"},pie:{allowPointSelect:!0,cursor:"pointer",dataLabels:{enabled:!0,color:"#000000",connectorColor:"#000000",formatter:function(){return"<b>"+this.point.name+"</b>: "+this.point.y}},shadow:!1}},tooltip:{pointFormat:"{series.name}: <b>{point.percentage:.1f} %</b>"},yAxis:{title:{text:"Total percent"}},legend:{enabled:!1},credits:{enabled:!1},exporting:c};e.highcharts(n.merge(a,t))},exportingOptions:c}}(window.c2,window.$,window._,window.Highcharts),function(e,t){"use strict";function n(e,n){t(e).tooltip("hide").attr("data-original-title",n).tooltip("show")}function a(e){setTimeout((function(){t(e).tooltip("hide")}),1e3)}function i(){const e=document.getElementsByClassName("clipboard-button"),t=new ClipboardJS(e);return t.on("success",(function(e){n(e.trigger,"Copied!"),a(e.trigger)})),t.on("error",(function(e){n(e.trigger,"Did not copy."),a(e.trigger)})),t}t(".clipboard-button").tooltip({trigger:"click",placement:"bottom"}),e.clipboard={activateClipboardButtons:i,init:function(){i()}}}(window.c2,$),function(e){"use strict";window.c2.collapsible={init:function(e){var t="c2.collapsible"+window.location.pathname,n=$(e),a=n.find('[data-toggle="collapse"]').map((function(){return $(this).data("target")})).get();!function(e,t){var n=localStorage.getItem(e);if(null==n)return void("admin"===t.attr("class")&&$(".panel-body").addClass("in"));var a,i=JSON.parse(n);i&&i.length&&_.forEach(i,(function(e){(a=$(e)).length&&(a.addClass("in"),a.trigger("show.bs.collapse"),$('[data-target="'+e+'"]').removeClass("collapsed"))}))}(t,n),_.forEach(a,(function(e){$(e).hasClass("in")||$('[data-target="'+e+'"]').addClass("collapsed")})),n.on("shown.bs.collapse hidden.bs.collapse",(function(){!function(e,t){var n=function(e){return _.filter(e,(function(e){return $(e).hasClass("in")}))}(t);localStorage.setItem(e,JSON.stringify(n))}(t,a)}))}}}(),function(e,t){"use strict";e.combobox={chain:function(n,a,i,o,r){var l,s,c=$(n),d=$(a),u=t.template(i),f=r.labelField||r.valueField||void 0,p={labelField:f,sortField:{field:f,direction:"asc"},searchField:[f]};function g(e,n){e.length&&(l.disable(),l.clearOptions(),l.load((function(a){!function(e,n,a){a=t.defaults(a||{},{focusOnLoad:!0}),s&&s.abort();var i=u({value:e});s=$.ajax({url:i,success:function(e){l.enable(),n(e),a.focusOnLoad&&l.focus()},error:function(){n()}})}(e,a,n)})))}t.defaults(r,p),e.selectize(a,r),l=d[0].selectize,e.selectize(n,t.defaults(o,{onChange:g})),l.disable();var h=c.val();h&&g(h,{focusOnLoad:!1})}}}(window.c2,window._),function(e,t){"use strict";var n=t.logging.getLogger(e),a={};function i(){for(var e in a){var t=o(e);$(document).off("keyup.global."+e),$(document).on("keyup.global."+e,t)}}function o(e){return function(i){if(!r(i)&&!t.dialogs.isOpen()){var o=a[e],l=i.key||i.keyCode,s=!1;if(n.debug('Look for "'+l+'" keyup.global.'+e+" handler"),i.isDefaultPrevented())n.debug("  Event default was already prevented so skipping handlers in this namespace");else{for(var c in n.debug("  active element:",document.activeElement),o)if(l==c){n.debug("  Found a handler and calling it"),o[c](i),s=!0;break}i.isDefaultPrevented()||s||void 0===o.default||(n.debug('  Calling default handler in namespace "'+e+'"'),o.default(i))}}}}function r(e){var t=document.activeElement.tagName.toLowerCase();return"textarea"===t||"input"===t}t[e]={aceOnPanelOpen:function(){var e;$(document).on("show.bs.collapse",(function(n){e=$(n.target),t.ace.initializeAceInPanel(e)}))},enablePostOnClick:function(e){$(document).on("click",e||"[data-post=click]",(function(e){e.preventDefault();var n=$(this),a=n.data("post-callback");$.post(n.data("post-url")||n.attr("href"),n.data("post-data")||{},(function(e){a&&a(e,n),e.redirectURL&&(window.location.href=e.redirectURL),n.data("silence-alerts")||(e.success&&t.alerts.addGlobalAlert(e.success,"success",!0),e.error&&t.alerts.addGlobalAlert(e.error,"error",!0))}))}))},popovers:function(){$("body").popover({selector:"[data-toggle=popover]",content:function(){console.debug("Finding popover content for this target: ",this);var e=$(this).data("contentSelector");if(e){var t=document.querySelector(e);if(t)return t.innerHTML;console.error("Cannot find content because a content element matching selector `"+e+"` cannot be found")}else console.error("Cannot find content because neither a `data-content` nor a `data-content-selector` attribute was specified.")}})},bindGlobalKeyHandlers:i,isUserTypingInField:r,registerGlobalKeyHandlers:function(e,t){if(void 0===a[e])a[e]=t;else for(var n in t)a[e][n]=t[n];i()}}}("commonEventHandlers",window.c2),function(e,t){"use strict";function n(e){a(t(e))}function a(n){n.find(".render_as_datepicker").datepicker({dateFormat:"yy-mm-dd"}),n.find("input").addClass("form-control"),n.find("td select").each((function(){e.selectize(t(this))}))}function i(e,n,a){var i=e.find(n),o=i.find("input,select"),r=t(a);r.attr("id",o.attr("id")),r.attr("name",o.attr("name")),i.html(r)}window.c2.customResourceReport={init:function(e){t("#filters tbody tr").formset({addLabel:'<span class="icon-add"></span> '+gettext("Add a Filter"),addClass:"btn btn-default",added:n,hideRemovedRows:!0,showDeleteAllLink:!1,formCssClass:"server-filter-form",prefix:e})},reloadFormOnAttrChange:function(n){t("#filters").on("change","td.attr select",(function(o){var r=t(this).val();if(void 0!==r){var l=t(this).closest("tr");e.block.block(l),t.get(n,{attr:r},(function(t){i(l,"td.operator",t.operator),i(l,"td.values",t.values),a(l),e.block.unblock(l)})).fail((function(t){l.html("<td colspan=4 class=error>"+gettext("Something went wrong. Please try again.")+"</td>"),e.block.unblock(l)}))}}))},runReport:function(n,a){var i=t("form#custom-resource-report-form").serializeArray();i.push({name:"format",value:a||"json"}),e.block.block(t("#report-container")),t.post(n,i,(function(n){if(n.table){var a=t(n.table);t("#report-container").html(a)}else n.export?e.downloads.startDownloadFromContent(n.export,n.filename):n.errors&&_.forEach(n.errors,(function(e,t){console.log("index: ",t),console.log("errors: ",e)}));e.block.unblock(t("#report-container"))}))},setupFieldStylesAndBehaviors:a}}(window.c2,window.jQuery),function(e,t){"use strict";function n(e){a(t(e))}function a(n){n.find(".render_as_datepicker").datepicker({dateFormat:"yy-mm-dd"}),n.find("input").addClass("form-control"),n.find("td select").each((function(){e.selectize(t(this))}))}function i(e,n,a){var i=e.find(n),o=i.find("input,select"),r=t(a);r.attr("id",o.attr("id")),r.attr("name",o.attr("name")),i.html(r)}window.c2.customServerReport={init:function(e){t("#filters tbody tr").formset({addLabel:'<span class="icon-add"></span> '+gettext("Add a Filter"),addClass:"btn btn-default",added:n,hideRemovedRows:!0,showDeleteAllLink:!1,formCssClass:"server-filter-form",prefix:e})},reloadFormOnAttrChange:function(n){t("#filters").on("change","td.attr select",(function(o){var r=t(this).val();if(void 0!==r){var l=t(this).closest("tr");e.block.block(l),t.get(n,{attr:r},(function(t){i(l,"td.operator",t.operator),i(l,"td.values",t.values),a(l),e.block.unblock(l)})).fail((function(t){l.html("<td colspan=4 class=error>"+gettext("Something went wrong. Please try again.")+"</td>"),e.block.unblock(l)}))}}))},runReport:function(n,a){var i=t("form#custom-server-report-form").serializeArray();i.push({name:"format",value:a||"json"}),e.block.block(t("#report-container")),t.post(n,i,(function(n){if(n.table){var a=t(n.table);t("#report-container").html(a)}else n.export?e.downloads.startDownloadFromContent(n.export,n.filename):n.errors&&_.forEach(n.errors,(function(e,t){console.log("index: ",t),console.log("errors: ",e)}));e.block.unblock(t("#report-container"))}))},setupFieldStylesAndBehaviors:a}}(window.c2,window.jQuery),$.extend($.fn.dataTableExt.oPagination,{bootstrap_four_button:{fnInit:function(e,t,n){e.oLanguage.oPaginate;var a=_.template('<a class="<%= action %> btn btn-default" data-action="<%= action %>"  title="<%= title %>"  data-toggle="tooltip"   data-html="true"   tabindex="0">  <span class="glyphicon glyphicon-<%= icon %>"></span></a>'),i='<span class="btn-group">'+a({action:"first",icon:"step-backward",title:gettext("First page")})+a({action:"previous",icon:"play mirror-horizontally",title:gettext("Previous page")})+a({action:"next",icon:"play",title:gettext("Next page")})+a({action:"last",icon:"step-forward",title:gettext("Last page")})+"</span>";$(t).append(i),$("a",t).on("keydown.DT",(function(e){if(!e.isDefaultPrevented())switch(e.key){case"Enter":case" ":$(this).click()}})),$("a",t).on("click.DT",(function(t){t.preventDefault(),e.oApi._fnPageChange(e,$(this).data("action"))&&n(e)}))},fnUpdate:function(e,t){for(var n=e.oInstance.fnPagingInfo(),a=0===n.iPage,i=0===n.iTotalPages||n.iPage===n.iTotalPages-1,o=e.aanFeatures.p,r=0;r<o.length;r++)$(".first, .previous",o[r]).toggleClass("disabled",a),$(".next, .last",o[r]).toggleClass("disabled",i)}}}),jQuery.fn.dataTableExt.oApi.fnProcessingIndicator=function(e,t){void 0===t&&(t=!0),this.oApi._fnProcessingDisplay(e,t)},jQuery.fn.dataTableExt.oApi.fnPagingInfo=function(e){return{iStart:e._iDisplayStart,iEnd:e.fnDisplayEnd(),iLength:e._iDisplayLength,iTotal:e.fnRecordsTotal(),iFilteredTotal:e.fnRecordsDisplay(),iPage:Math.ceil(e._iDisplayStart/e._iDisplayLength),iTotalPages:Math.ceil(e.fnRecordsDisplay()/e._iDisplayLength)}},jQuery.fn.dataTableExt.oApi.fnLengthChange=function(e,t){e._iDisplayLength=t,e.oApi._fnCalculateEnd(e),e._iDisplayEnd==e.aiDisplay.length&&(e._iDisplayStart=e._iDisplayEnd-e._iDisplayLength,e._iDisplayStart<0&&(e._iDisplayStart=0)),-1==e._iDisplayLength&&(e._iDisplayStart=0),e.oApi._fnDraw(e),e.aanFeatures.l&&$("select",e.aanFeatures.l).val(t)},jQuery.fn.dataTableExt.oApi.getSelectedValues=function(e,t){var n=$(this).dataTable(),a=n.data("selectedRows");return void 0!==a?a:n.$("tr.selected").find("input.selector").map((function(e){return $(this).val()})).toArray()},jQuery.fn.dataTableExt.oApi.countSelectedRows=function(e,t){var n=$(this).dataTable(),a=n.$("tr.selected"),i=n.data("selectedRows");return void 0!==i?i.length:a.length},jQuery.fn.dataTableExt.oApi.isServerSide=function(e){return void 0!==e.sAjaxSource&&null!==e.sAjaxSource},jQuery.fn.dataTableExt.oApi.clearSelection=function(e,t){var n=$(this).dataTable();n.$("td:eq(0) input:checked").prop("checked",!1),n.$("tr.selected").removeClass("selected"),n.isServerSide()&&n.data("selectedRows",[]),n.fnUpdateSelectionInfo(),c2.forms.updateBatchCheckboxes(n),_.forEach(n.data("on-selection-change"),(function(e){e(n)}))},jQuery.fn.dataTableExt.oApi.isSingleSelect=function(e,t){return $(this).dataTable().$("td:eq(0) input:radio").length>0},jQuery.fn.dataTableExt.oApi.fnUpdateSelectionInfo=function(e,t){var n=$(this).dataTable();if(!n.isSingleSelect()){var a=n.countSelectedRows(),i=n.closest(".dataTables_wrapper"),o=i.find(".dataTables_toolbar"),r=i.find(".selection-info");if(0!==r.length){var l=o.find(".selection-action");a>0?(r.addClass("active-selection"),l.removeClass("disabled")):(r.removeClass("active-selection"),l.addClass("disabled")),i.find(".selection-info .selection-count").html(a)}}},jQuery.fn.dataTableExt.oApi.fnSetFilteringDelay=function(e,t){var n=this;return void 0===t&&(t=250),this.each((function(e){$.fn.dataTableExt.iApiIndex=e;var a=null,i=null,o=$('input[type="search"]',n.fnSettings().aanFeatures.f);return o.unbind("keyup search input").bind("keyup search input",(function(r){var l=o.val();"Tab"!=r.key&&(null!==i&&i==l||(window.clearTimeout(a),i=l,a=window.setTimeout((function(){$.fn.dataTableExt.iApiIndex=e,n.fnFilter(l)}),t)))})),this})),this},function(e,t,n,a){"use strict";var i=t.logging.getLogger(e);function o(e){return t.dataTables.dialogDefaults}function r(e){var t={onSelect:function(t,i,o){setTimeout((function(){e.isServerSide()&&function(e){var t=e.dataTable(),i=t.$("td:eq(0) input:checked"),o=t.$("td:eq(0) input:not(:checked)"),r=e.data("selectedRows")||[],l=a.map(i,(function(e){return n(e).val()})),s=a.map(o,(function(e){return n(e).val()}));l=a.union(l,r),l=a.difference(l,s),e.data("selectedRows",a.uniq(l))}(e),e.fnUpdateSelectionInfo(),a.forEach(e.data("on-selection-change"),(function(t){t(e,o)}))}),0)}},i=e.data("clickable-options");!function(e){if(e.isSingleSelect()||e.data("table-toolbar"))return;var t=e.closest(".dataTables_wrapper").find(".dataTables_toolbar");0===t.find(".selection-info").length&&t.prepend(function(e){var t=n('<div class="selection-info">  <span class="label label-default">    <span class="selection-count">0</span> '+gettext("selected")+"  </span></div>"),a=n('<a class="clear-selection no-tooltip-affordance"   data-toggle="tooltip" title="'+gettext("Clear selection")+'">  <span class="icon-delete"></span></a>');return a.on("click",(function(t){t.preventDefault(),e.clearSelection()})),t.find(".label").append(a),t}(e))}(e),e.clickable(a.merge(t,i)),function(e){var t,n=e.data("selectedRows");a.forEach(n,(function(n){(t=e.$("tr").find("input[value="+n+"]"))&&(t.prop("checked",!0),t.closest("tr").addClass("selected"))})),e.fnUpdateSelectionInfo()}(e),e.fnUpdateSelectionInfo()}function l(e){return{aoColumnDefs:[{bSortable:!1,aTargets:[0]}],aaSorting:[[1,"asc"]],fnDrawCallback:function(t){var a=this.fnSettings().oPreviousSearch.sSearch,i=a!=e.data("prevSearch");r(e),i&&(e.data("prevSearch",a),n().clickable.forgetPrevClick(e)),w(e),e.trigger("table:draw",this.fnSettings()),h(e)}}}function s(e){return void 0===e?{order:[]}:"disabled"===e?{ordering:!1}:{order:[[(e=String(e).split(","))[0],void 0===e[1]?"asc":e[1]]]}}function c(e){if(void 0===e)return{};switch(typeof e){case"string":return"["==(e=e.trim()).substr(0,1)?{aaData:JSON.parse(e)}:{bServerSide:!0,sAjaxSource:e};case"object":return{aaData:e};default:return{}}}function d(e){if(void 0!==e)return{aoColumns:a.map(e.split(","),(function(e){return{mDataProp:e}}))}}function u(e){if("function"==typeof e){return{fnServerData:function(t,a,i,o){o.jqXHR=n.ajax({dataType:"json",type:"GET",url:t,data:a,success:function(t){e(t),i(t)}})}}}}function f(e){return"function"==typeof e?{fnServerParams:e}:"object"==typeof e?{fnServerParams:function(t){t.concat(e)}}:void 0}function p(e){for(var t=n.fn.dataTableSettings,a=0,i=t.length;a<i;a++)if(t[a].nTable==e)return!0;return!1}function g(e){return"DataTable#"+(e.sInstance||"")+window.location.pathname}function h(e){var t=v(e),n=t.parent(),a=t.val();a?(n.addClass("active-search"),function(e,t){m(e).show().find("b").text(t)}(e,a)):(n.removeClass("active-search"),function(e){m(e).hide().find("b").text("")}(e))}function v(e){return e.closest(".dataTables_wrapper").find(".dataTables_filter input")}function m(e){e.attr("id");var t=e.find("matching-term");return 0===t.length&&(t=n('<span class="matching-term"> '+gettext("matching the term")+" <b></b></span>"),e.closest(".dataTables_wrapper").find(".dataTables_info").append(t)),t}function b(e){var t=v(e);!function(e){var t,a=e.parent("label").contents().filter((function(){return 3==this.nodeType}));a.length>0&&(a[0].nodeValue="");var i=n('<span class="input-group addon-right"></span>');t=n('<span class="input-group-addon">  <span class="glyphicon glyphicon-search"></span></span>'),e.wrap(i),e.addClass("form-control"),e.attr("aria-label","Search in this table"),e.after(t)}(t),e.fnSetFilteringDelay(500),t.clearable(),t.on("keyup",(function(){}))}function w(e){var n="#"+e.attr("id");t.sparklines.init(n+" .sparkline"),t.tooltip.init(e),t.text.enableDoubleClickSelection(n),t.forms.enableBatchCheckboxes(n),e.find("input[data-toggle=toggle]").bootstrapToggle(),t.toggles.enablePostOnChange(n+" input[data-toggle=toggle]")}var y=a.merge(n.fn.dataTable.defaults,{aLengthMenu:[10,25,50,100,500],bAutoWidth:!1,bProcessing:!0,iDisplayLength:25,sPaginationType:"full_numbers",oLanguage:{sInfo:interpolate(gettext("%(range)s of %(total)s items"),{range:'<span class="table-items-shown">_START_ - _END_</span>',total:'<span class="table-items-total">_TOTAL_</span>'},!0),sInfoFiltered:interpolate(gettext(" (%(count)s total)"),{count:"_MAX_"},!0),sInfoEmpty:gettext("No items"),sLengthMenu:"_MENU_ &nbsp;",sEmptyTable:gettext("No results found"),sProcessing:'<div class="blocker fade-in"><div class="dead-center-container"><div class="dead-center-content"><div class="spinner"></div></div></div></div>'},sDom:"<'panel panel-default'  <'panel-body dataTables-header'    f      <'dataTables_toolbar'>    r    >      <'scroll-wide-content't>   <'panel-body dataTables-footer'    l      i      p  >>",fnInitComplete:function(){b(this),this.removeClass("stats").addClass("table table-hover table-condensed"),""===this.find("thead th").text()&&this.closest(".dataTables_wrapper").addClass("noHeadings")},fnDrawCallback:function(){var e=n(this);w(e),e.trigger("table:draw",this.fnSettings()),h(e)},bStateSave:!0,fnStateSave:function(e,t){t.iStart=0,t.iEnd=t.iLength,localStorage.setItem(g(e),JSON.stringify(t))},fnStateLoad:function(e){try{return JSON.parse(localStorage.getItem(g(e)))}catch(e){console.log(e)}}});n.extend(n.fn.dataTableExt.oSort,{"currency-pre":function(e){return e="-"===e?0:e.replace(/[^\d\-\.]/g,""),parseFloat(e)},"currency-asc":function(e,t){return e-t},"currency-desc":function(e,t){return t-e}});var k=a.defaults({bStateSave:!1},y);function _(e){var t=n(this);n("#filters-panel select").each((function(){n(this)[0].selectize.clear()})),n("#filters-panel input:checkbox").prop("checked",!1),n("#filters-panel input[type=text]").val(""),t.submit(),$(0)}function $(e){0===e?n("#filtersInUse").html(""):n("#filtersInUse").html("<b>("+e+" "+gettext("in use")+")</b>")}t.dataTables={init:function(e,g){var h,v,m=[];g=g||{},n(e||"table[data-table]").each((function(){h=n(this),g=a.merge(g,h.data("table-options")),p(this)||void 0!==h.data("table-no-auto-init")&&!e||((v=h.data("table"))&&(m=v.split(" ")),(g=a.defaults(g,a.defaults.apply(null,a.filter([-1!=m.indexOf("formset")?{bFilter:!1,bSort:!1,bStateSave:!1}:null,-1!=m.indexOf("scrollable")?{bInfo:!1,bPaginate:!1,sScrollY:"250px",bScrollCollapse:!1}:null,-1!=m.indexOf("clickable")?l(h):null,-1!=m.indexOf("dialog")?o(h):null,s(h.data("table-sort")),c(h.data("table-source")),d(h.data("table-source-prop")),u(h.data("table-fnServerDataCallback")),f(h.data("table-fnServerParams")),t.dataTables.defaults],a.isObject)))).aoColumnDefs=function(e,t){if(void 0!==e){var n={bSortable:!1,aTargets:a.map(String(e).split(","),Number)};return t.aoColumnDefs?(t.aoColumnDefs.push(n),t.aoColumnDefs):[n]}}(h.data("table-sort-disabled"),g),i.debug("  table options: ",g),h.dataTable(g),function(e){var t=e.data("table-toolbar");if(void 0===t)return;var a=n(t);if(a&&a.length){e.closest(".dataTables_wrapper").find(".dataTables_toolbar").append(a),a.show()}}(h),-1!=m.indexOf("clickable")&&(r(h),t.dialogs.onSubmitSerializeAllSelectedRows(h)))}))},isDataTable:p,defaults:y,dialogDefaults:k,drawRowsGroupedByCol:function(e,t,n,a){if(0!==t.aiDisplay.length){for(var i=e.$("tbody tr"),o=i[0].getElementsByTagName("td").length,r="",l=0;l<i.length;l++){var s=t._iDisplayStart+l,c=t.aoData[t.aiDisplay[s]]._aData[n];if(c!=r){var d=document.createElement("tr"),u=document.createElement("td");u.colSpan=o,u.className=void 0===a?"grouped-by":a,u.innerHTML=c,d.appendChild(u),i[l].parentNode.insertBefore(d,i[l]),r=c}}e.column(n).visible(!1)}},setupToolbarBehavior:function(e,a,i){a.on("click",".btn.selection-action:not(.disabled):not(.dropdown-toggle),.btn.selection-action:not(.disabled) + .dropdown-menu a",(function(a){a.preventDefault();var o={},r=e.dataTable(),l=r.$("input.selector")[0].name,s=r.getSelectedValues();o[l]=s;var c=n(this),d=c.data("href")||i,u=c.data("action");if(u&&(o.action=u),c.hasClass("selection-action-new-tab")){var f=n.param(o);window.open(d+"?"+f,"_blank")}else{n("#dialog-modal").data(c.data()),t.dialogs.displayJqXHR(n.get(d,o))}})),a.on("click",".selection-info .dropdown-menu a",(function(t){var a=e.dataTable();switch(n(this).data("action")){case"select-none":a.clearSelection();break;case"select-page":a.find("tbody tr:visible td:first-child input").not(":checked").click();break;case"select-all":console.log("selecting all rows in all pages is not supported yet"),a.$("tbody tr:visible td:first-child input").not(":checked").click()}}))},reloadTable:function(e){try{n(e).DataTable().ajax.reload()}catch(t){console.error('Failed to reload dataTable "'+e+'".  Exception: ',t)}},addListFilters:function(e){var t=n("#filters-panel form").serializeArray(),a={};n.each(t,(function(e,t){t.name in a?a[t.name].push(t.value):a[t.name]=[t.value]})),e.push({name:"filters_selected",value:JSON.stringify(a)}),e.push({name:"with_checkboxes",value:1}),e.push({name:"load_filters_from_profile",value:1})},initListFilters:function(e,i){var o=!1,r=n(e),l=n("#filters-panel"),s=n(".filters-panel-toggle-btn-text"),c=n("#filters-panel-toggle"),d=n("#export-to-csv");i=i||"filter_form/",c.on("keydown",(function(e){"Enter"!==e.key&&" "!==e.key||n(this).click()})),c.click((function(){o||(t.block.block(l),l.load(i,(function(){t.block.unblock(l),o=!0,l.find("form").submit((function(e){e.preventDefault(),r.dataTable().clearSelection(),n(this).append('<input type="hidden" name="new_filters" value="1" />'),r.DataTable().ajax.reload()})),n("#unfilter").on("click",_)})))})),d.click((function(){var e=r.DataTable().ajax.params();e.as_csv="true";var i=r.attr("data-table-source");n.get(i,e,(function(e){e.export?t.downloads.startDownloadFromContent(e.export,e.filename):e.errors&&a.forEach(e.errors,(function(e,t){console.log("index: ",t),console.log("errors: ",e)}))}))})),l.on("shown.bs.collapse",(function(){s.html(gettext("Hide filters"))})),l.on("hidden.bs.collapse",(function(){s.html(gettext("Show Filters"))}))},updateFiltersInUseFromResponse:function(e){$(e.filtersInUse)}}}("dataTables",window.c2,window.jQuery,window._),function(e,t){"use strict";e.datepicker={initDatePicker:function(){t(".input-daterange input").datepicker({autoclose:!0,clearBtn:!0,endDate:"0d",format:"mm/dd/yyyy",todayHighlight:!0,todayBtn:!1}).on("changeDate",(function(e){var n=t("#start").val(),a=t("#end").val(),i=t("[value=Apply]"),o=t(".daterange-group input"),r=t("#daterange-error-message");function l(){i.removeAttr("disabled"),r.empty().removeClass("daterange-error-active"),o.removeClass("daterange-group-error")}""!==n&&""!==a?!1===new Date(n)<=new Date(a)?(i.attr("disabled","true"),o.addClass("daterange-group-error"),r.text(gettext("Start date must come before end date")).addClass("daterange-error-active")):l():l();t("#daterange-selectize-toolbar").on("click",(function(e){t("#start").val(""),t("#end").val(""),l()}))}))}}}(window.c2,window.jQuery),function(e){"use strict";var t=null,n=null,a=null;function i(e){!function(e){var t,n,a=e.find("form").find(":input:visible,select.selectized,input.selectized").first();a.length&&a[0]&&a[0].selectize&&(n=(t=a[0].selectize).settings.openOnFocus,t.settings.openOnFocus=!1);a.focus(),t&&(t.settings.openOnFocus=n)}($(e.target))}function o(n){if(n.target===t[0]){var a=t.data("dialogOptions");t.removeData(),t.empty(),a&&a.reloadOnClose&&(e.block.block(),location.reload())}}function r(e){var n=t.data("customFormSubmissionHandler");if(n)return n(e);e.preventDefault(),s()}function l(e){var t=e.data("altPostData");if(t)return t;var n=0!==e.find("input[type='file']").length,a="undefined"!=typeof FormData;return n&&a?new FormData(e[0]):e.serializeArray()}function s(){if(!t.data("submitInProgress")){t.data("submitInProgress",!0),t.find(".modal-footer .cb-btn-primary").button("loading");var e=t.data("dialogOptions");if(e&&e.useAjax){var a={data:l(n),type:"POST",url:n.attr("action")};"[object FormData]"===Object.prototype.toString.call(a.data)&&(a.processData=!1,a.contentType=!1);var i=$.ajax(a);f(i),i.always((function(){t.data("submitInProgress",!1)}))}else{var o=n[0];o.target&&t.modal("hide"),o.submit()}}}function c(e){var n='<div class="modal-dialog">  <div class="modal-content">    <div class="modal-header">      <h4 class="modal-title text-danger">'+(e.title||"An Error Has Occurred")+'</h4>      <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>    </div>    <div class="modal-body">      <pre class="pre-scrollable">'+(e.message||"The server is not responding. Please contact an administrator.")+(e.details||"")+'      </pre>    </div>    <div class="modal-footer">      <button class="btn btn-default cb-btn cb-btn-link" data-dismiss="modal">Close</button>    </div>  </div></div>';t.html(n)}function d(e,n,a){if(e.redirect_url)window.onbeforeunload=null,window.location=e.redirect_url;else if(e.error)c(e.error);else if(e.nextURL){g($.get(e.nextURL))}else t.html(e)}function u(e,t,n){c(t+": "+n)}function f(e){e.then(d,u).always((function(){1!==(n=t.find("#action_form")).length&&(n=t.find("form")),a=t.find(".js-submit-form"),n.on("submit",r),a.on("click",r),n.on("keypress",(function(e){var t=13===e.keyCode,n=t&&(e.ctrlKey||e.shiftKey)||10===e.keyCode,a="TEXTAREA"===e.target.tagName;(t&&!a||n)&&r(e)}));var e=t.data("dialog-width");e&&t.find(".modal-dialog").css("width",e),function(e){e.on("dblclick",(function(t){$(t.target).parents(".modal-dialog").length||e.modal("hide")}))}(t)})).then((function(){var e={backdrop:"static"};t.data("prevent-esc-closing")&&(e.keyboard=!1),t.modal(e)}),(function(){console.log("Could not load the dialog's contents.")}))}function p(e){if(window===window.top){e.preventDefault(),$("#tooltip-container").html("");var n=$(e.currentTarget),a=n.attr("href")||n.data("href");t.data(n.data()),g($.get(a))}else window.top.c2.dialogs.clickHandler(e)}function g(t){e.block.block(),f(t),t.always((function(){e.block.unblock()}))}e.dialogs={init:function(){t=$("#dialog-modal"),$(document).on("click",".open-dialog",p),$(document).on("click",".js-dialog-link",p),$(document).on("shown.bs.modal",i),$(document).on("hidden.bs.modal",o)},displayJqXHR:g,isOpen:function(){return $("#dialog-modal").is(":visible")},submitForm:s,onSubmitSerializeAllSelectedRows:function(t,n){var a=void 0!==n?n:t.closest("form");t=$(t).dataTable(),$("#dialog-modal").data("customFormSubmissionHandler",(function(n){n.preventDefault(),a.data("altPostData",e.forms.serializeFormAndTableSelection(a,t)),e.dialogs.submitForm()}))},clickHandler:p}}(window.c2),function(e){"use strict";var t=c2.logging.getLogger(e);function n(e,t){var n=document.createElement("a");n.setAttribute("href",e),n.setAttribute("download",t),n.classList.add("hidden"),document.getElementsByTagName("body")[0].insertAdjacentElement("beforeend",n),n.click(),setTimeout((function(){n.remove()}),50)}function a(e){return _.map(e,(function(e){return'"'+e+'"'}))}c2.downloads={startDownload:n,startDownloadFromContent:function(e,a,i){void 0===i&&(i="text/csv"),t.debug("filename:",a,"mimeType:",i);var o=new Blob([e],{type:i});if(navigator.msSaveBlob)navigator.msSaveBlob(o,a);else{var r=URL.createObjectURL(o);t.debug("url:",r),n(r,a)}},quoteValues:a,arrayToCSV:function(e,t){var n=[a(e).join(",")];return _.forEach(t,(function(e){var t=a(e);n.push(t.join(","))})),n.join("\r\n")}}}("downloads"),function(e,t,n){"use strict";function a(e){var n=t(this),a=n.prop("checked"),i=n.closest("th").prevAll().length;n.closest("table").find("tbody tr:visible").each((function(e){var n=t(this).children().eq(i).find("input");n.prop("checked")!=a&&n.trigger("click")}))}function i(e){var n=t(this),a=n.closest("tr"),i=n.prop("checked");a.find("input:not(.check-row)").prop("checked",i)}function o(e){var n,a,i,o;t(e).find(".check-column").each((function(r){n=t(this),a=n.closest("th").prevAll().length,i=t(e).find("tbody tr:visible").find("td:eq("+a+") input"),o=i.length>0&&i.length==i.filter(":checked").length,n.prop("checked",o)})),t(e).find(".check-row").each((function(e){n=t(this),i=n.closest("tr").find("td input:not(.check-row):visible"),o=i.length>0&&i.length==i.filter(":checked").length,n.prop("checked",o)}))}e.forms={actionButtonPreview:function(){var e=t('<button id="preview" class="btn btn-default"></button>');e.on("click",(function(e){e.preventDefault()}));var n=t("#id_extra_classes"),a=gettext("Button preview");n.closest(".form-group").after('<div class="form-group">  <label class="control-label col-lg-3"> '+a+' </label>  <div id="preview-wrap" class="controls col-lg-9">  </div></div>'),t("#preview-wrap").html(e);var i=t("#id_label");function o(){var a=n.val(),o=t('<i id="preview-icon"></i>');e.html(o);var r=/['";\/><]/g;o.addClass(a.replace(r,"")),o.after("&nbsp;&nbsp;"+i.val().replace(r,""))}o(),n.on("keyup",o),i.on("keyup",o)},appendShowAllButton:function(e){var n=t(e),a=!1;n.next().hasClass("custom-combobox-toggle")||(t("<a>").attr("tabIndex",-1).attr("title","Show All Items").insertAfter(n).button({icons:{primary:"ui-icon-triangle-1-s"},text:!1}).removeClass("ui-corner-all").addClass("custom-combobox-toggle ui-corner-right").mousedown((function(){a=n.autocomplete("widget").is(":visible")})).click((function(){n.focus(),a||n.autocomplete("search","")})),n.css("width","auto"))},doOrderAction:function(n){n.preventDefault();var a=t(n.target);if(a.hasClass("icon-delete")&&!confirm("Remove all items from this order (cannot be undone)? "))return!1;e.block.block();var i=a.data("action"),o=a.closest("form");o.find('input[name="action"]').val(i),o.submit()},enableBatchCheckboxes:function(e){var n=t(e);n.on("click",".check-column",a),n.on("click",".check-row",i),n.on("change","tbody input:checkbox:not(.check-column)",(function(t){o(e)})),o(e)},hide_add_link_when_depleted:function(e,n){0===e.length&&t("a.add-form").replaceWith("<p>"+n+"</p><br>")},iconPreview:function(){var e=t('<span id="icon-preview"></span>'),n=t("#id_icon");n.closest(".form-group").after('<div class="form-group">  <label class="control-label col-lg-3">Icon preview</label>  <div id="preview-wrap" class="controls col-lg-9">  </div></div>');var a=n.closest(".form-group").next();function i(){var t=n.val();if(t){e.removeClass(),e.addClass(t.replace(/['";\/><]/g,"")),a.show()}else a.hide()}t("#preview-wrap").html(e),i(),n.on("keyup",i)},makeFormsetManagementData:function(e){return{"form-TOTAL_FORMS":e,"form-INITIAL_FORMS":0,"form-MAX_NUM_FORMS":1e3}},markRowForDeletionOrNot:function(e,n){(n||t(e).find("tbody tr")).each((function(e){var n=t(this);0===n.find("input:checkbox:checked").length?n.find("a.delete-form").trigger("click"):n.find("a.unremove").trigger("click")}))},moveOffsetLabelsToLeftCol:function(e){var n,a,i;e.find(".col-lg-offset-3").removeClass("col-lg-offset-3").each((function(){n=t(this),(a=n.closest(".form-group")).find("div.checkbox").removeClass("checkbox"),a.find("div.radio").removeClass("radio"),(i=n.find("label")).addClass("control-label col-lg-3"),i.prependTo(a),i.children().appendTo(n)}))},serializeFormAndTableSelection:function(t,a){var i,o,r=t.serializeArray(),l=a.$("tr.selected").find("input,select").serializeArray();if(a.hasClass("clickable")){var s=a.getSelectedValues(),c=a.$("input.selector");c.length&&n.forEach(s,(function(e){l.push({name:c[0].name,value:e})}))}return i=n.union(l,r),o=n.uniq(i,!1,(function(e,t,n){return e.name+"::"+String(e.value)})),o=n.map(o,(function(e){var t={};return t[e.name]=e.value,t})),encodeURI(n.map(o,e.querystring.stringify).join("&"))},setupActionFileFields:function(){var e=t("input[name=file_location]"),n=t(".upload-widget").find("#id_module_file, #browse_button, .js-clear, #module_file-current a"),a=t("#id_source_code_url"),i=t("#id_local_path"),o=t("#id_git_source_code_url");function r(){var r=e.filter(":checked").val(),l={upload:t("#div_id_module_file"),url:t("#div_id_source_code_url"),later:null,local:t("#div_id_local_path"),git:t("#div_id_git_source_code_url")},s={upload:n,url:a,later:null,local:i,git:o};!function(e){t.each(l,(function(e,t){null!=t&&t.hide()})),null!=l[e]&&l[e].show(),t.each(s,(function(e,t){null!=t&&t.prop("disabled",!0).addClass("disabled")})),null!=s[e]&&s[e].prop("disabled",!1).removeClass("disabled")}(r)}!function(){var e=t('#div_id_file_location [value="upload"]').parent();t("#div_id_module_file").appendTo(e);var n=t('#div_id_file_location [value="url"]').parent();t("#div_id_source_code_url").appendTo(n);var a=t('#div_id_file_location [value="git"]').parent();t("#div_id_git_source_code_url").appendTo(a),t("#div_id_branch").appendTo("#div_id_git_source_code_url"),t("#div_id_refresh_on_order").appendTo("#div_id_git_source_code_url");var i=t('#div_id_file_location [value="local"]').parent();t("#div_id_local_path").appendTo(i)}(),e.on("change",r),r()},setupSchedulingFields:function(){var e,n=t("input[name=run_option]");function a(){var e=n.filter(":checked").val();"now"==e?t("#div_id_scheduled_time").hide():"later"==e&&t("#div_id_scheduled_time").show()}t("#id_scheduled_time"),e=t("#div_id_run_option label:eq(2)"),t("#div_id_scheduled_time").appendTo(e),n.on("change",a),a()},setupWebHooksForm:function(){var e=t("select[name=authentication_method]"),n=t("input[name=http_username], input[name=http_password]"),a=t("input[name=auth_header_name], input[name=auth_header_value]");function i(){var t=e.val();"none"==t?(n.prop("disabled",!0).closest(".form-group").hide(),a.prop("disabled",!0).closest(".form-group").hide()):"basic"==t?(n.prop("disabled",!1).closest(".form-group").show(),a.prop("disabled",!0).closest(".form-group").hide()):"token"==t&&(n.prop("disabled",!0).closest(".form-group").hide(),a.prop("disabled",!1).closest(".form-group").show())}e.on("change",i),i()},splitElementsIntoColumns:function(e,n,a){var i=a||"lg",o=t('<div class="row"></div>'),r=t('<div class="col-'+i+'-6"></div>').appendTo(o),l=t('<div class="col-'+i+'-6"></div>').appendTo(o);return r.append(e.slice(0,n)),l.append(e.slice(n)),o},updateBatchCheckboxes:o,initPasswordFields:function(){function e(e,t){e.toggleClass("fa-eye fa-eye-slash"),t.attr("type","password");var n=e.attr("timeout");clearTimeout(n),e.removeAttr("timeout")}t(".toggle-password").off("click"),t(".toggle-password").click((function(){var n=t(this),a=t("#"+n.attr("toggle"));"password"==a.attr("type")?function(t,n){t.toggleClass("fa-eye fa-eye-slash"),n.attr("type","text");var a=setTimeout((function(){e(t,n)}),t.attr("delay"));t.attr("timeout",a)}(n,a):e(n,a)}))},setUpKubernetesSettingsForm:function(){var e="input[name=auth_type]",n=t(e),a="input[name=servicepasswd]",i="input[name=bearer_token]",o="textarea[name=ca_file_contents]",r="textarea[name=key_file_contents]",l="textarea[name=cert_file_contents]",s=[a,i,o,r,l],c={PASSWORD:[a],TOKEN:[i],CERTIFICATE:[o,r,l]};function d(){for(var n,a=t(e).filter(":checked").val(),i=c[a],o=0;o<i.length;o++)n=i[o],t(n).prop("disabled",!1).closest(".form-group").show();!function(e){for(var n=0;n<s.length;n++){var a=s[n];e.includes(a)||t(a).prop("disabled",!0).closest(".form-group").hide()}}(i)}!function(){var e="#div_id_auth_type label:eq(3)";t("#div_id_ca_file_contents").appendTo(t(e)),t("#div_id_cert_file_contents").appendTo(t(e)),t("#div_id_key_file_contents").appendTo(t(e));var n=t("#div_id_auth_type label:eq(2)");t("#div_id_bearer_token").appendTo(n);var a=t("#div_id_auth_type label:eq(1)");t("#div_id_servicepasswd").appendTo(a)}(),n.on("change",d),d()},addTerraformMappingFields:function(){t.map(t("label"),(e=>t(e).text(((e,t)=>t.replace(/CTV_/,"")))));const e=t('div[id^="div_id_custom"]');t.map(e,(e=>t(e).hide())),t(".modal-footer:first").prepend('<button id="add_button" type=button>Add Variable</button>'),t("#add_button:first").attr("class","cb-btn cb-btn-primary").click((()=>{t('div[id^="div_id_custom_key"]:hidden:first').show(),t('div[id^="div_id_custom_value"]:hidden:first').show()}))},addToDataTableFormDialog:function(e){const n=(()=>{let n=0;return()=>{n++;const a=`\n        <tr>\n            <td>\n              <input\n                type="checkbox"\n                id="custom_checkbox_${i=n}"\n                name="${e}"\n                checked\n                disabled\n              />\n            </td>\n            <td>\n              <input\n                type="text"\n                id="custom_text_${i}"\n                name="${e}"\n              />\n            </td>\n        </tr>\n      `;var i;t("#checkbox-select-multiple > tbody:last-child").append(a),t(`#custom_text_${n}`).keyup((function(){t(`#custom_checkbox_${n}`).val(this.value)})).focus()}})();t(".modal-footer:first").prepend('<button id="add_button" type=button>Add Custom</button>'),t("#add_button:first").attr("class","cb-btn cb-btn-primary").click(n)},initPowerScheduleForm:function(){const e=t(".power-schedule-fields"),n=t(".power-schedule").eq(0);t("#add-power-schedule").click((function(a){a.preventDefault();const i=n.clone(),o=t(".power-schedule").length;let r=i.prop("id");r=r.replace(/\d/,o),i.prop("id",r),i.addClass("new-schedule"),i.find(".error-list").remove(),i.find("select").each((function(){let e=t(this).prop("name");e=e.replace(/\d/,o),t(this).prop("name",e),t(this).val(0)})),e.append(i)})),e.on("click",".delete-schedule",(function(){const e=t(this).parent(),n=t('input[name="deleted_schedules"]'),a=n.val(),i=e.attr("id");e.hasClass("new-schedule")||n.val(a+i+","),e.remove()}))}}}(window.c2,window.jQuery,window._),function(e,t){"use strict";e.history={loadHistoryData:function(n){var a=t("#history"),i=t("#tab-history");n?a.data("table-source-data-url",n):n=a.data("table-source-data-url"),i.css("min-height","400px"),e.block.block(i),t.get(n,(function(t){var n=[];t.aaData?(a.data("table-source",t.aaData),e.dataTables.init("#history"),n=t.aaData):a.insertAfter('<div class="alert alert-danger">Failed to retrieve history data</div>'),e.serverStats.drawCharts(n),e.block.unblock(i)}))}}}(window.c2,window.jQuery),function(e){"use strict";window.c2.iframes={autoSize:function(e){e.height=0,e.width="100%",e.height=e.contentDocument.body.scrollHeight}}}(),function(e,t){"use strict";var n,a,i,o,r;function l(){console.log("Activity detected."),console.log("Stop DOM and server-side polling"),s(),clearInterval(a),console.log("POST to server."),t.post(n,{},(function(e){})),console.log("Start polling server and observing DOM in "+1..toString()+" minutes"),setTimeout((function(){var e;e=1+Math.random(),console.log("startPollingServer at interval "+e.toString()+"..."),a=setInterval(c,6e4*e),document.onclick=l,document.onkeypress=l,document.onmousemove=l}),6e4)}function s(){document.onclick=null,document.onkeypress=null,document.onmousemove=null}function c(){var e=t.get(n);e.done((function(e){console.log("  TimeoutMin: ",o),console.log("  Server poll response: ",e),clearTimeout(r),r=null,e.minutesSinceLastActivity>o&&(console.log("  ---\x3e Ok.  Time out now."),s(),clearInterval(a),i())})),e.fail((function(e,t,n){console.log("Poll error: ",t),r||(console.log("Starting client-side timeout for "+o.toString()+" minutes..."),r=setTimeout(i,6e4*o))}))}e.inactivity={init:function(e,t,a){i=t,o=e,n=a,l()}}}(window.c2,window.jQuery),function(e){"use strict";const t=c2.logging.getLogger(e);function n(e){return $(e).data("includeState")}function a(e,t){$(e).data("includeState",t)}function i(e,i){var o,r,l=$(e),s=l.data("include"),c=l.data("include-callback"),d=l.data("include-error");n(e)||(a(e,"loading"),(i||l.data("block"))&&c2.block.block(e),$.ajax({url:s,dataType:"html"}).done((function(e){e&&-1!==e.indexOf("Maintenance Mode")?(t.info("Response indicates maintenance mode is on."),r=!1):(o=e,r=!0)})).fail((function(){!1!==d&&(o=d||"Content failed to load.",r=!1)})).always((function(){!0===r&&(l.html(o),a(e,"loaded"),l.find("[data-include-timestamp]").text("Last updated "+moment().format("MMMM Do YYYY, h:mm:ss a")),l.one("click","[data-include-refresh]",(function(t){t.preventDefault(),c2.include.reload(e,!0)})),c2.clipboard.activateClipboardButtons()),i&&c2.block.unblock(e),l.trigger("cb.include.loaded",r),c&&c(e,r)})))}c2.include={loadAll:function(){$("[data-include]").each((function(){i(this)}))},reload:function(e,t){a(e,null),i(e,t)},getState:n}}("include"),function(e){"use strict";var t;function n(n){var o;n.preventDefault();var r=$(this).closest("[data-inline-form-url]"),l=r.data("inline-form-url");$.get(l,(function(n){n.errorMessage?e.alerts.addGlobalAlert(n.errorMessage,"error",!0,5e3):((t=r.children()).hide(),r.closest(".revealer").find("a.inline-edit-link").hide(),function(e,t){e.on("click","[data-btn-save]",(function(n){n.preventDefault(),i(e,t)})),e.on("click","[data-btn-cancel]",(function(t){t.preventDefault(),a(e)})),e.on("keypress",(function(n){var o=n.key||n.keyCode;"Enter"!=o&&13!=o||(n.preventDefault(),"data-btn-save"in n.target.attributes&&i(e,t),"data-btn-cancel"in n.target.attributes&&a(e))})),$(document).on("keydown",(function(t){var n=t.key||t.keyCode;"Escape"!=n&&27!=n||(a(e),t.preventDefault())}))}(o=$(n.content),l),r.append(o),r.trigger("cb.inlineEdits.loaded"))}))}function a(e){var n=e.closest("[data-inline-form-url]");e.remove(),t.show(),n.closest(".revealer").find("a.inline-edit-link").show(),$("#tooltip-container").html(""),n.trigger("cb.inlineEdits.closed")}function i(t,n){var a,i=t.closest("[data-include]");e.block.block(t,!0),$("#tooltip-container").html(""),$.post(n,t.serializeArray(),(function(n){t.remove(),$(document).trigger("cb.inlineEdits.closed"),"success"==n.status&&(a=5e3,e.include.reload(i)),n.alert&&e.alerts.addGlobalAlert(n.alert,n.status,!0,a),e.block.unblock(t)}))}e.inlineEdits={init:function(e){$(e).find("[data-inline-form-url]").each((function(){var e=$(this),t=$('<a href="#" class="inline-edit-link revealable"><i class="icon-edit"></i></a>');t.on("click",n),e.append(t)}))}}}(window.c2),function(e){"use strict";e.jobs={drawProgressBar:function(e){$.getJSON("/jobs/"+e+"/status/",(function(t){!function(e,t){var n="progress-bar progress-bar-"+(i=t.status,{success:"success",warning:"warning",failure:"danger"}[i.toLowerCase()]||"info"),a=$("#progress-bar-"+e).removeClass().addClass(n).width(t.percentDone+"%");var i;t.duration&&a.html("<span>"+t.duration+"</span>");$("#tooltip-container").html("");var o=$("#progress-"+e).attr({"data-toggle":"tooltip","data-container":"#progress-"+e,"data-title":"Completed "+t.tasksDone+" of "+t.totalTasks+" tasks"});t.isRunning?o.addClass("progress-striped active"):o.removeClass("progress-striped active")}(e,t)}))},refreshJobPage:function(t){document.title=t.title,$("#job-title").text(t.title),t.remoteScriptOutputs.length>0&&setTimeout((function(){!function(t){if(void 0!==t){var n=$(".currentOutput textarea").get(0);if(void 0!==n){var a=e.scrolling.isScrolledToBottom(n);n.value+=t.substring(n.value.length),a&&e.scrolling.scrollToBottom(n)}}}(t.remoteScriptOutputs[0].outputString)}),100),t.progressStrings.length>1&&setTimeout((function(){!function(t,n){if(void 0!==n){var a=t.get(0);void 0!==a&&e.scrolling.isScrolledToBottom(a)&&e.scrolling.scrollToBottom(a)}}($("#job-progress"),t.progressStrings)}),50),setTimeout((function(){e.tooltip.init($(".job-detail"))}),500)}}}(window.c2),function(e){"use strict";function t(){var e=$(".token");"CB_LOCAL_USER_STORAGE"===$("#id_domain").val()?e.hide():e.show()}e.login={init:function(){if(e.animation.isSupported()&&$("#login").addClass("fade-in"),$("html.ie9").length)return $(".not-supported").css("display","block"),void $(".has-js").css("display","none");$(".has-js").css("display","block"),$("input, select").addClass("form-control");var n=$("#id_username"),a=$("#id_password");n.focus(),t(),$("#id_domain").on("change",t),$("#login form").submit((function(t){return n.val()?a.val()?(e.block.block(),void $(document).on("keypress",(function(e){return e.preventDefault(),!1}))):(a.focus(),!1):(n.focus(),!1)}))}}}(window.c2),function(e,t){"use strict";e.mixpanel={init:function(){mixpanel.init(e.settings.mixpanelToken),t("a.help-link").on("click",(function(e){var t;mixpanel.track("Help clicked",{path:(t=window.location.pathname,t.replace(/\/\d+\//g,"/N/")),hash:window.location.hash,"id.license":window.c2.settings.CBLicenseID})}))}}}(window.c2,window.jQuery),window.Modernizr=function(e,t,n){function a(e){g.cssText=e}function i(e,t){return typeof e===t}function o(e,t){return!!~(""+e).indexOf(t)}function r(e,t){for(var a in e){var i=e[a];if(!o(i,"-")&&g[i]!==n)return"pfx"!=t||i}return!1}function l(e,t,a){for(var o in e){var r=t[e[o]];if(r!==n)return!1===a?e[o]:i(r,"function")?r.bind(a||t):r}return!1}function s(e,t,n){var a=e.charAt(0).toUpperCase()+e.slice(1),o=(e+" "+v.join(a+" ")+a).split(" ");return i(t,"string")||i(t,"undefined")?r(o,t):l(o=(e+" "+m.join(a+" ")+a).split(" "),t,n)}var c,d,u={},f=t.documentElement,p=t.createElement("modernizr"),g=p.style,h="Webkit Moz O ms",v=h.split(" "),m=h.toLowerCase().split(" "),b={},w=[],y=w.slice,k={}.hasOwnProperty;for(var _ in d=i(k,"undefined")||i(k.call,"undefined")?function(e,t){return t in e&&i(e.constructor.prototype[t],"undefined")}:function(e,t){return k.call(e,t)},Function.prototype.bind||(Function.prototype.bind=function(e){var t=this;if("function"!=typeof t)throw new TypeError;var n=y.call(arguments,1),a=function(){if(this instanceof a){var i=function(){};i.prototype=t.prototype;var o=new i,r=t.apply(o,n.concat(y.call(arguments)));return Object(r)===r?r:o}return t.apply(e,n.concat(y.call(arguments)))};return a}),b.csscolumns=function(){return s("columnCount")},b)d(b,_)&&(c=_.toLowerCase(),u[c]=b[_](),w.push((u[c]?"":"no-")+c));return u.addTest=function(e,t){if("object"==typeof e)for(var a in e)d(e,a)&&u.addTest(a,e[a]);else{if(e=e.toLowerCase(),u[e]!==n)return u;t="function"==typeof t?t():t,f.className+=" "+(t?"":"no-")+e,u[e]=t}return u},a(""),p=null,u._version="2.8.3",u._domPrefixes=m,u._cssomPrefixes=v,u.testProp=function(e){return r([e])},u.testAllProps=s,f.className=f.className.replace(/(^|\s)no-js(\s|$)/,"$1$2")+" js "+w.join(" "),u}(0,this.document),function(e){"use strict";var t=c2.logging.getLogger(e);function n(e){return e.hasClass("open")||"visible"==e.find(".dropdown-menu").css("visibility")}function a(e){if(!n(e)){e.children("a").focus();var t=e.find("ul.dropdown-menu");r(),e.addClass("open"),setTimeout((function(){t.find("a,input").first().focus()}),100),t.find("a,input").on("hover.navbar",(function(e){$(this).focus()})),t.on("mouseout.nav-item",(function(n){o(e),t.off("mouseout.nav-item")})),i(e,t)}}function i(e,n){n.off("keydown.nav-item"),n.on("keydown.nav-item",(function(n){var i=$(this).find("a,input"),o=n.key,l=document.activeElement,s=i.index(l);if(!n.isDefaultPrevented()&&!c2.commonEventHandlers.isUserTypingInField(n))switch("Tab"===o&&!0===n.shiftKey&&(o="Shift+Tab"),t.debug("  submenu keydown:",n.key),o){case"Escape":case"Esc":r();break;case"ArrowDown":case"Down":i.eq(s+1).focus();break;case"ArrowUp":case"Up":case"Shift+Tab":0===s?(r(),e.children("a").focus()):(r(),i.eq(s-1).focus()),n.preventDefault();break;case"ArrowRight":case"Right":r(),a(e.next("li"));break;case"ArrowLeft":case"Left":r(),a(e.prev("li")),n.preventDefault()}}))}function o(e){e.removeClass("open"),$(document).keyup((function(e){27===e.keyCode&&$("li").hasClass("open")&&$(".nav li").removeClass("open")}))}function r(){$("#header .nav li").hasClass("open")&&$("#header .nav li").removeClass("open")}c2.navbar={init:function(){var e=$("#header .nav");!function(e){var t=$("body").data("topnav");-1!=["admin-index","actions","jobs","managerates","orchestrationengines","os-builds","portals","providers","resourcehandlers","users"].indexOf(t)&&(t="admin");e.children().children('li[data-topnav="'+t+'"]').addClass("active"),$("#content").addClass(t)}(e),function(e){$("a.submenu-btn").click((function(t){var n=$(this).parent();n.hasClass("open")?(n.removeClass("open"),n.children("a").blur(),$("#search-input").blur()):(t.stopPropagation(),e.children().children("li").removeClass("open"),n.children("a").focus(),n.addClass("open"),setTimeout((function(){$("#search-input").focus()}),200))}))}(e),function(e){var n=e.children().children("li");n.on("keydown.nav-item",(function(e){var i=$(this),o=e.key,r=n.index(i);if(t.debug(" navbar keydown:",e.key),!e.isDefaultPrevented()&&!c2.commonEventHandlers.isUserTypingInField(e))if(e.metaKey||e.ctrlKey)t.debug("Ignoring menu keydown modified by CMD/CTRL");else switch(o){case"ArrowDown":case"Down":case" ":a(i),e.preventDefault();break;case"ArrowLeft":case"Left":r>0&&(n.eq(r-1).children("a").focus(),e.preventDefault());break;case"ArrowRight":case"Right":r<n.length&&(n.eq(r).children("a").blur(),n.eq(r+1).children("a").focus(),e.preventDefault())}}))}(e),$("#search-input").click((function(e){e.stopPropagation()})),function(e){$(document).click((function(t){0!==t.target.length&&e.children().children("li").removeClass("open")}))}(e)},isSubMenuOpen:n,openSubMenu:a,closeSubMenu:o,setupKeyNavigationOfMenu:i}}("navbar"),function(e,t){"use strict";var n,a,i="There are no more networks to add.";function o(n){n.preventDefault(),a.html(t("body").data("origNetworksTable")),e.block.unblock("#networkListBox")}function r(o){e.block.block(a),t.get(n,(function(n){a.html(n),t("#editNetworksForm tbody tr").formset({addLabel:'<span class="icon-add"></span>'+gettext("Add a network"),added:s,formTemplate:t("#network_form_template"),hideRemovedRows:!1,prefix:"networks",formCssClass:"networks-dynamic-form"}),e.forms.hide_add_link_when_depleted(t("body").data("possibleNetworks"),i),e.dataTables.init(),t(".networks-dynamic-form").find("input:checkbox:not(:checked):first").click().click(),e.block.unblock(a)}))}function l(i){i.preventDefault();var o=t("#editNetworksForm input, #editNetworksForm select").serialize();return o+="&"+t("#networks").dataTable().$("input").serialize(),t.post(n,o,(function(t){t.errors?console.log(t):(a.html(t),e.alerts.addGlobalAlert(gettext("Network options have been saved."),"success",!0,1e4))})),!1}function s(n){for(var a=n.addClass("new-dynamic-form").find("td.network"),i=a.find("input"),o=t("<select></select>").prop("id",i.prop("id")).prop("name",i.prop("name")),r=t("body").data("possibleNetworks"),l=0;l<r.length;l++)o.append('<option value="'+r[l][0]+'">'+r[l][1]+"</option>");i.remove(),a.prepend(o),o.selectize({dropdownParent:"body"}),e.forms.hide_add_link_when_depleted(r,gettext("There are no more networks to add."));var s=n.last().find(".delete-form");s.length>1&&s.last().remove(),n.find("td.nic1 input").prop("checked",!0)}window.c2.networkTableAndFormset={init:function(s,c){n=s,t((function(){a=t("#networkListBox"),t("body").data("origNetworksTable",a.html()),a.off("click"),a.on("click","button.cancel",o),a.on("click",".convertToForm",r),c&&(i=""),a.off("submit"),a.on("submit",l),e.dataTables.init()}))}}}(window.c2,window.jQuery),function(e){"use strict";var t="c2.orchestrationActions.active";e.orchestrationActions={init:function(e){var n=$(e),a=n.find("> .panel");$("select#jobtype").selectize({onChange:function(e){""!==e&&(!function(e,t){"type-all"===t?e.show():("type-Other"===t&&(t="type-None"),e.hide(),$("#"+t).show())}(a,e),localStorage.setItem(t,e))}});var i=function(){var e=window.location.hash.substr(1);e||(e=localStorage.getItem(t));return e}()||"type-all";$("select#jobtype")[0].selectize.setValue(i),n.removeClass("hidden")}}}(window.c2),function(e,t){"use strict";var n,a,i,o,r,l,s,c,d,u,f,p=t.logging.getLogger(e),g={};function h(e,n,a){var r;if($("#id_recipients").length){r="recipients";var l=(c=$("#id_recipients")).parent().parent().parent()}else if($("#id_recipient").length){r="recipient";var c;l=(c=$("#id_recipient")).parent().parent()}if(r&&l.hide(),!e)return $("#service-items > .tab-content").html("<i>"+gettext("Select a group first")+"</i>"),void H();if(!$("#blueprint-order-form").find("> .blocker").hasClass("in")){if("recipient"===r){var g;g=f||s+"ajax_recipient_options",g+="?group_id="+e;var v=c[0].selectize;$.ajax({url:g,success:function(e){n||a||(c.attr("data-ignore-change",!0),v.clearOptions(),c.removeAttr("data-ignore-change")),v.addOption(e),_.keys(v.options).length>0&&l.show()}})}else"recipients"===r&&l.show();if($("#id_recipient").off("change").on("change",(function(){if(!$(this).attr("data-ignore-change")){var e=(i=t.selectize("select[name=order_group]")).getValue();d={},h(e,!1,!0)}})),$("#cost-preview-wrap").remove(),$("#id_recipient").length)var w="&recipient_id="+$("#id_recipient")[0].value;else if($("#id_recipients").length)w="&recipient_ids="+$("#id_recipients")[0].value;else w="";m(s+"?group_id="+e+w,$("#service-items").html(""),(function(){!function(){var e=$(".service-item.provserver");if(1!==e.length)return;var t=e.first(),n=t.data("configured-env-ids");if(void 0===n)return;var a=t.attr("id").split("item-")[1],r=i.getValue(),l=o.val(),c=_.template("<%= base %>?group_id=<%= groupID %>&service_item=<%= itemID %>&env_id=<%= envID %>"),d=n.slice(0,10);_.each(d,(function(e){$.get(c({base:s,itemID:a,groupID:r,envID:e}),(function(t){if(t.error)p.error(t.error);else if(b(a,r,e,t.content),u){var n=$('<div style="display:none"></div>');n.html(t.content);var i=x(n);n.remove(),function(e,t,n,a,i){i=function(e,t){var n=$(".service-item").index($("#item-"+e)),a=/form-[0-9]+-/g,i="form-"+n+"-";return t.replace(a,i)}(e,i),I(e,t,n,a,i,(function(t){void 0===t.rateBreakdown?p.error("response has no rateBreakdown: ",t):(p.info(t),function(e,t,n,a,i){var o=$("#env-cost-comp"),r=$("#item-"+e).find('select[name$="-environment"]');if(0===r.length)return;var l=r[0].selectize.options[t].text;0===o.length&&(o=function(e,t){var n=_.template('  <div class="form-group">    <label class="col-lg-3 control-label">      '+gettext("Cost Preview")+'(<%= currencyUnit %>/<%= timeUnit %>)      <div class="infotip" data-toggle="tooltip" data-html="true"        title="<p>'+gettext("Costs by environment.")+"</p>   <p>"+gettext("This comparison of base costs will <em>not</em> update as you make changes below.")+'<p>"        ></div>    </label>    <div class="col-lg-9">      <div id="env-cost-comp"></div>    </div>')({currencyUnit:e,timeUnit:t}),a=$('<div id="cost-preview-wrap"></div>');a.append(n),$("#order-form-wrap").append(a);var i=$("#env-cost-comp");return i.css({border:"1px solid #ddd"}).highcharts({title:{text:""},subtitle:{text:""},xAxis:{tickColor:"transparent",type:"category"},series:[{color:"#99bc82",data:[]}],yAxis:{endOnTick:!1,labels:{formatter:z},title:{text:""}},legend:{enabled:!1},chart:{type:"bar"},tooltip:{headerFormat:"",pointFormatter:function(){return gettext("Base cost for this environment per")+t+": <b>"+P(this.y,e)+"</b>"}},exporting:{enabled:!1},credits:{enabled:!1}}),i}(a,i));!function(e,t,n){var a=e.highcharts(),i=12,o=80;a.series[0].addPoint([t,n],!1),e.css("height",o+a.series[0].data.length*i),a.reflow(),$("#cost-preview-wrap").addClass("show")}(o,l,n)}(e,n,t.rateTotal,t.rateCurrencyUnit,t.rateTimeUnit))}))}(a,r,e,l,i)}}))}))}(),y(),C()}),(function(){H()}))}}function v(e,t,n){var a=$("#item-"+t),i=a.find(".update-on-env-change"),o=function(){var e,t,n,i,o;$(".service-item").not(".nested").each((function(a,i){$(i).find('[name^="form-"]').each((function(){e=$(this),t=e.attr("name").slice(5),n=t.split("-")[1],e.attr("name","form-"+a+"-"+n)}))})),$(".service-item.blueprint").each((function(a,r){$(r).find(".service-item").each((function(a,r){$(r).find('[name^="bpsi"]').each((function(){e=$(this),t=e.attr("name").slice(4),i=t.split("-"),o=i[0],n=i[2],e.attr("name","bpsi"+o+"-"+a+"-"+n)}))}))})),k(a),C()},r=function(e,t,n){void 0===d[e]&&(d[e]={});void 0===d[e][t]&&(d[e][t]={});return d[e][t][n]}(t,e,n);if(void 0===r){if($("#id_recipient").length>=1)var l=$("#id_recipient")[0].value;else l="";m(s+"?group_id="+e+"&service_item="+t+"&env_id="+n+"&recipient_id="+l,i,(function(a){o(),b(t,e,n,a)}))}else i.html(r),o()}function m(e,n,a,i){t.block.block("#blueprint-order-form"),$.get(e,(function(e){if(e.error){var o=$('<div class="alert alert-danger"></div>').html(e.error);n.html(o),i&&i()}else n.html(e.content),a&&a(e.content);t.block.unblock("#blueprint-order-form")}))}function b(e,t,n,a){void 0===d[e]&&(d[e]={}),void 0===d[e][t]&&(d[e][t]={}),d[e][t][n]=a}function w(e){return $('[data-toggle=tab][href="#'+e+'"]').closest(".service-item-handle")}function y(){var e=i.getValue();$('select[name$="-environment"]').each((function(){var n=$(this),i=t.selectize(n,{onChange:function(t){!function(e,t,n){if(n&&"None"!=n){var a=e.closest(".service-item").attr("id").split("item-")[1];M(a,t,n),v(t,a,n)}}(n,e,t)}});n.addClass("form-control"),M(function(e){if(e.hasClass("service-item"))return e.attr("id").split("item-")[1]}(n.closest(".service-item")),e,i.getValue()),a&&i.setValue(a),1===_.keys(i.options).length&&i.disable()})),$(".service-item").each((function(e,t){k($(t))}))}function k(e){e.find(".render_as_datepicker").datepicker({dateFormat:"yy-mm-dd"}),function(e){var t;e.find("#blueprint-order-form input[type=radio]").closest(".controls").each((function(){0===(t=$(this).find("input[type=radio]")).filter(":checked").length&&t.filter(":first").prop("checked",!0)}))}(e),function(e){var t;e.find("select[name*=sc_nic_]").each((function(){(t=$(this)).off("change").on("change",(function(){j($(this))})),j(t)}))}(e),function(e){var t,n;e.find("input[type=checkbox]").each((function(){t=$(this),t.closest(".form-group"),n=t.closest(".col-lg-9"),t.closest(".checkbox").removeClass("checkbox"),n.removeClass("col-lg-offset-3").css("padding-top","7px"),t.closest("label").addClass("control-label col-lg-3"),n.before(n.children()),n.append(t)}))}(e),t.smartFields.init(e),e.find('select[name$="-environment"]').val()&&e.hasClass("provserver")&&O(e.attr("id"))}function x(e){return e.find('input:not([name$="_metadata"]), select, textarea').serialize()}function C(){hljs.initHighlighting(),t.sliders.init(),T(),H()}function S(e,t){var n=w(e);t?(n.find(".state-error").show(),n.find(".state-ready").hide()):(n.find(".state-error").hide(),n.find(".state-ready").show())}function T(){p.debug("updateFormState()");var e,t=!1,n=0,a=0;if($("#id_recipients").length){var i=$("#id_recipients"),o=i.parent().find(".token.invalid");o.length>0&&(p.debug(o),t=!0)}$(".service-item").each((function(){var e=$(this),i=e.attr("id"),o=w(i);e.data("show")||function(e){if(e.find(":input").not(":disabled").not('[style*="left: -10000px"]').not(".hidden").not("[type=hidden]").not('[style*="display: none"]').length>0)return!0;return e.find(".selectize-input").not(".disabled").not(".locked").length>0}(e)?(0===$(".service-item-handle.active").length&&0===n&&(o.addClass("active"),e.addClass("active")),n+=1):(o.addClass("hidden"),e.addClass("hidden"),a+=1),!function(e){var t=e.find(".form-group.has-error").length>0;t||e.find("label.requiredField").each((function(){$(this).closest(".form-group").each((function(){var e=$(this);if(!1!==e.data("dependent-field-visible")){var n=D(e);n.length&&!n.val()&&(p.debug("    Field is required but empty",n),t=!0)}else p.debug("    Ignoring required field. It is hidden by a controlling field.")}))}));return t}(e)?S(i,!1):(t=!0,S(i,!0))})),0===n?($("#service-item-nav").addClass("hidden"),$("#service-items .tab-content").addClass("hidden")):1===n&&($("#service-item-nav").addClass("hidden"),$("#service-items .tab-content").removeClass("col-sm-9")),0!==a&&$(".blueprint-overview").find(".icon-cog").length&&(console.log("One or more blueprint items were hidden because they do not require user input"),console.log("You are seeing this message because you can manage this blueprint.")),e=t,$("#submit-btn").prop("disabled",e?"disabled":"")}function D(e){return e.closest(".form-group").find(".form-control").not(".selectize-control,.selectize-dropdown")}function A(e){if(p.debug("updateFormIfFieldChanged","  e.type: ",e.type),function(e){if("change"==e.type)return!0;var t=e.key||e.keyCode;if(-1!==["Tab",9,"Shift",16,"Enter",13,"Alt",18,"Meta",91,"Escape",27,"ArrowUp",38,"ArrowDown",40,"ArrowLeft",37,"ArrowRight",39].indexOf(t))return!1;if(-1!=e.target.parentNode.className.indexOf("selectize"))return p.debug("  keyup on selectize; ignore."),!1;return p.debug("  key:",t,"code:",e.keyCode),!0}(e)){var t=$(this),n=t.closest(".form-group");if(!n.hasClass("environment-option")){t.hasClass("selectize-control")&&(p.debug("  $field has .selectize-control, getting actual select"),t=D(n),p.debug("  New $field: ",t)),p.debug("  $field: ",t),p.debug("    val:",t.val());var a=n.hasClass("has-error"),i=function(e){var t=e.closest(".form-group");if(e.is('input[name*="sc_nic"]')&&e.is('[name$="_ip"]'))return function(e,t){var n=null!==e.val().match(/^(?:[0-9]{1,3}\.){3}[0-9]{1,3}$/);n?N(e):R(e,gettext("Enter a valid IPv4 address."));return B(t,n),n}(e,t);return function(e,t){p.debug("validateRequiredField",e);var n=!0;!1===t.data("dependent-field-visible")&&(p.debug("    Ignoring required field. It is hidden by a controlling field."),n=!1);var a=t.find("label").hasClass("requiredField"),i=!n||n&&(!a||a&&""!==e.val());i?N(e):R(e,gettext("This field is required."));return B(t,i),i}(e,t)}(t);a&&i&&(t.removeClass("has-error"),n.removeClass("has-error"));var o=t.closest(".service-item");!function(e){e.find('input[name$="-hostname"]:disabled').closest(".form-group").removeClass("has-error")}(o),i&&o.hasClass("provserver")&&E(o.attr("id")),T()}}}var F;F=0;function I(e,n,a,i,o,r){var l=function(e){var t=function(e){var t="form-",n=e.split("-");n.length>1&&(t="bpsi"+n[0]+"-");return t}(e),n=function(e,t){var n=$("#item-"+e).find('select[name$="-environment"]');if(0===n.length)return;return n.attr("name").split(t)[1].split("-")[0]}(e,t);if(void 0===n)return;return{pssi_form_prefix:t,pssi_form_index:n}}(e);if(void 0!==l){_.assign(l,t.forms.makeFormsetManagementData(1));var s=$.param(l)+"&";if(s+=o,a)s+=_.template("&<%= prefix %><%= index %>-environment=<%= envID %>")({prefix:l.pssi_form_prefix,index:l.pssi_form_index,envID:a});if(i)s+=_.template("&<%= prefix %><%= index %>-resourceName=<%= resourceName %>")({prefix:l.pssi_form_prefix,index:l.pssi_form_index,resourceName:i});$.post(c+"?group_id="+n,s,r)}}function O(e){var n=$("#"+e),a=e.split("item-")[1],r=x(n),l=i.getValue(),s=o.val(),c=function(e){var t=e.find('select[name$="-environment"]'),n=t.val();t.length&&t.prop("disabled")&&(t[0].selectize.enable(),n=t.val(),t[0].selectize.disable());return n}(n),d=n.find(".si-rate"),u=$('<div style="width: 600px">&nbsp;</div>');d.html("").append(u),t.block.block(u,!0),I(a,l,c,s,r,(function(e){var t=function(e,t){void 0===g[e]&&(g[e]={});return g[e][t]}(a,l);if(c==t){var i=n.find(".si-rate");if(void 0!==e.error&&i.html(e.error),void 0!==e.rateBreakdown)!function(e,t,n,a,i){var o=L("",e);if(0===o.length)return void i.html("Not available from cloud provider.");o=o.reverse(),i.css({width:"630px",height:"160px",margin:"0 auto"}).show().highcharts({title:{text:P(t,n,a)+gettext(" total")},subtitle:{text:""},series:o,xAxis:{visible:!1},yAxis:{labels:{formatter:z},endOnTick:!1,min:0,title:{text:""}},legend:{backgroundColor:"#FFFFFF",reversed:!0},chart:{type:"bar"},tooltip:{headerFormat:"",pointFormatter:function(){return this.series.name+": <b>"+P(this.y,n)+"</b>"}},plotOptions:{series:{animation:!1,stacking:"normal"}},exporting:{enabled:!1},credits:{enabled:!1}})}(e.rateBreakdown,e.rateTotal,e.rateCurrencyUnit,e.rateTimeUnit,i),n.find('input[name$="-hostname"]:disabled').val(e.hostnamePreview);else S(a,!0),p.error("response.content: ",e.content)}else{var o=_.template("Cost request finished for item <%= itemID %>, group <%= groupID %>, and env <%= envID %>. Ignoring because a different env (<%= activeEnvID %>) is now active.")({itemID:a,groupID:l,envID:c,activeEnvID:t});p.debug(o)}}))}var E=$.debounce(1e3,O);function P(e,t,n){var a=(e.toString().split(".")[1]||"").length;a=Math.max(a,2);var i=t+e.toFixed(a);return void 0!==n&&(i+="/"+n),i}function L(e,t){if(_.isObject(t)){var n=t;return _.reduce(n,(function(e,t,n){return e.push.apply(e,L(n,t)),e}),[])}if(t)return[{name:e,data:[t],color:{Extra:"#c26e0e","OS Build":"#ffd845",Applications:"#ffb313","Mem Size":"#8fbcf2","Disk Size":"#4a9de4",CPUs:"#335b83"}[e]||null}]}function z(){return this.value>99.99?parseInt(this.value):this.value}function j(e){p.debug("setupFieldsForNetwork() $nic: ",e);var t,n,a=e.val(),i=parseInt(e.attr("name").split("sc_nic_")[1]),o=e.closest(".service-item"),r=o.find("input[name*=sc_nic_"+i+"_metadata]").first(),l=e.next(".help-block");0===l.length&&(l=$('<div class="help-block"></div>'),e.after(l));var s=l.find("strong"),c=o.find("input[name*=sc_nic_"+i+"_ip]").first(),d=c.closest(".form-group");!function(e,t,n){var a=t.find("label");if(a.hasClass("child-field"))return;t.insertAfter(e.closest(".form-group")),a.removeClass("col-lg-3").addClass("child-field").before('<div class="col-lg-3"></div>'),a.insertBefore(n),n.css("width","auto")}(e,d,c);var u=c.attr("name").split("_ip")[0],f=o.find("#id_"+u+"_choiceRow");0===f.length&&(f=function(e,t){var n="id_"+e,a=e+"_choice",i=n+"_dhcp",o=n+"_static",r='<div id="'+n+'_choiceRow" class="form-group">  <div class="col-lg-3"></div>  <div class="col-lg-9 controls">    <div>      <input type="radio" value="DHCP" name="'+a+'" id="'+i+'" checked="checked">      <label for="'+i+'" class="control-label">'+gettext("Use DHCP")+'</label>    </div>      <input type="radio" value="static" name="'+a+'" id="'+o+'">      <label for="'+o+'" class="control-label">'+gettext("Static IP Address")+'&nbsp;&nbsp;</label>      <input class="form-control" name="'+e+'_ip" type="text" style="width: auto; display: inline-block;">  </div></div>',l=$(r);return l.find("input[type=radio]").on("change",(function(){var e=l.find('input[type="text"]');"DHCP"===$(this).val()?(e.prop("disabled",!0),B(l,!0),N(e)):e.prop("disabled",!1)})),t.after(l),l}(u,d));var g=f.find("input[name*=sc_nic_"+i+"_ip]");d.hide(),f.hide(),c.prop("disabled",!0),g.prop("disabled",!0);try{var h=r.val();h&&(n=JSON.parse(h)),t=n[a]}catch(e){console.error("Error reading metadata: ",e.message)}finally{if(p.debug("  netInfo:",t),t){"readonly"==e.attr("readonly")&&e.closest(".form-group").hide();var v="",m=c.val();switch(t.ip_provider){case"ipam":v=gettext("IP addresses will be assigned from an IPAM utility.");break;case"pool":v=gettext("IP addresses will be assigned from an IP pool.");break;case"dhcp":break;case"user_static":""!==m&&-1!==m.indexOf(t.initial_ip)||c.val(t.initial_ip||""),c.prop("disabled",!1),d.show(),c.focus();break;case"user_static_or_dhcp":""!==m&&-1!==m.indexOf(t.initial_ip)||g.val(t.initial_ip||""),c.prop("disabled","DHCP"===f.find("input[type=radio]").val()),f.show()}0!==s.length&&(v=s.html()),l.html(v)}}}function M(e,t,n){void 0===g[e]&&(g[e]={}),g[e][t]=n}function B(e,t){t?e.removeClass("has-error"):e.addClass("has-error")}function R(e,t){var n=e.next(".help-block");0===n.length&&e.after('<span class="help-block"></span>'),0===n.find(".validation-error").length&&n.append('<span class="validation-error">'+t+"</span>")}function N(e){var t=e.next(".help-block");t.find(".validation-error").remove();var n=t.html();(n=="<strong>"+gettext("This field is required.")+"</strong>"||n=="<strong>"+gettext("Enter a valid IPv4 address.")+"</strong>")&&t.html("")}function q(e){e.preventDefault(),$("#submit-btn").attr("disabled",!0),t.block.block("#blueprint-order-form");var n,a=$(this),o=i.getValue(),r=a.find(".service-item");n=n||"body",$('select[name$="-environment"]').each((function(){$(this)[0].selectize.enable()}));$.param(t.forms.makeFormsetManagementData(r.length));$("form").serialize();var l=new FormData($("form#blueprint-order-form")[0]),c=t.forms.makeFormsetManagementData(r.length);$.each(c,(function(e,t){l.append(e,t)})),$.ajax({url:s+"?group_id="+o,type:"POST",data:l,async:!1,cache:!1,contentType:!1,enctype:"multipart/form-data",processData:!1,success:function(e){var n;e.redirectURL?window.location.href=e.redirectURL:(e.error?$("#service-items").html(e.error).addClass("error"):$("#service-items").html(e.content),y(),C(),$(".order-form-valid-fields").each((function(){$("[name="+$(this).data("field-name")+"]").closest(".form-group").removeClass("has-error").find("ul.errorlist").remove()})),$(".order-form-error-fields").each((function(){n=$(this),$("[name="+n.data("field-name")+"]").closest(".form-group").addClass("has-error").append(n.html()).show()})),t.block.unblock("#blueprint-order-form"))}})}function H(){var e=$("#service-item-nav");if(e.length&&!e.hasClass("hidden"))$("#content").addClass("compact-layout");else{$("#content").addClass("compact-layout more-compact");var t=$(".service-item .item-details");t.find(".panel-body .row").hasClass("no-details")&&t.hide(),$(".alignment-shim.col-sm-3").hide(),$(".alignment-shim.col-sm-9").removeClass("col-sm-9")}$("#blueprint-order-form").removeClass("hidden")}t.orderForm={init:function(e,p,g,v){s=e,c=p,d={},u=g||!1,f=v,$("#id_recipients").length&&$("#id_recipients").tokenfield("setTokens","self"),$((function(){var e;(i=t.selectize("select[name=order_group]",{onChange:function(e){h(e)}}),r=i.options,l=_.map(r,"value"),(o=$("input[name=resource_name]")).on("blur",y),$("#id_recipients").length&&($("#id_recipients").on("tokenfield:createtoken",(function(e){$(this).tokenfield("getTokens").filter((function(t){return t.value===e.attrs.value})).length>0&&e.preventDefault()})).on("tokenfield:removetoken",(function(e){var t=$(this).tokenfield("getTokens");if("SELF"===e.attrs.label.toUpperCase()&&1===t.length)return!1})).on("tokenfield:removedtoken",(function(e){var t,n=$(this);0===n.tokenfield("getTokens").length&&n.tokenfield("setTokens","self"),0==(t=$(this),t.parent().find(".token:not(.invalid)")).length&&n.tokenfield("setTokens","self")})).on("tokenfield:createdtoken",(function(e){var t=s+"ajax_validate_recipient?";t+="group_id="+$("#id_order_group")[0].value,t+="&qry="+e.attrs.value;var n=$(e.relatedTarget);$.ajax({url:t,success:function(e){e.length?n.value=e[0].value:n.addClass("invalid")}})})).on("tokenfield:edittoken",(function(e){if("SELF"===e.attrs.label.toUpperCase())return!1})),$("#id_recipients-tokenfield").blur((function(e){T()}))),$("#blueprint-order-form").submit(q),$("#blueprint-order-form").on("change",".form-control, .controls input[type=radio]",A),$("#blueprint-order-form").on("keyup",".form-control, .controls input[type=radio]",A),function(e){var o=location.search.slice(1);if(0!==o.length){var r=t.querystring.parse(o);n=r.group||void 0,a=r.env||void 0}if(n&&_.contains(e,n))i.setValue(n)}(l),l.length>0)?h(i.getValue(),!0):(e=gettext("None of the groups you can submit orders for can deploy this blueprint."),$("#blueprint-order-form [type=submit]").prop("disabled","disabled"),$("#action-msg").html('<div class="alert alert-warning">'+(e||"There is a problem with this blueprint.")+"  Please ask an administrator for help.</div>"));$("#submit-btn-tip").tooltip({placement:"right",title:function(){return $("#submit-btn").prop("disabled")?gettext("A form requires attention"):gettext("Submit order for approval")}}),H()}))},setupRuntimeField:function(e){var t,n=$("#runtime-"+e),a=$("#runtime-widget-"+e),i=a.find(".runtime-orig");function o(){$("#runtime-toggle-"+e).prop("checked")?(i.find("input, textarea, select, checkbox").prop("disabled",""),(t=i.find(".selectized")).length&&t[0].selectize.enable(),i.find("button").show(),n.val("_default_")):(i.find("input, textarea, select, checkbox").prop("disabled","disabled"),(t=i.find(".selectized")).length&&t[0].selectize.disable(),i.find("button").hide(),n.val("_runtime_"))}a.find(".runtime-user");var r=$("#runtime-toggle-"+e);r.on("change",o),r.bootstrapToggle(),o()}}}("orderForm",window.c2),function(e){"use strict";window.c2.params={enforceParamServerOptions:function(){var e,t=$("#id_available_all_servers"),n=$("#id_show_on_servers");e="toggle"==t.data("toggle")?function(e){t.prop("checked")?n.bootstrapToggle("on").bootstrapToggle("disable"):n.bootstrapToggle("enable")}:function(e){t.prop("checked")?n.prop("checked",!0).prop("disabled",!0):n.prop("disabled",!1)},t.on("change",e),e()}}}(),function(e){"use strict";var t=!0;e.progressBars={disableAnimations:function(){t&&($("head").append("<style>.progress-bar { -webkit-transition: none; transition: none; }</style>"),t=!1)}}}(window.c2),function(e){"use strict";window.c2.querystring={stringify:function(e){return Object.keys(e).map((function(t){return t+"="+e[t]})).join("&")},parse:function(e){var t={};return"?"===e.charAt(0)&&(e=e.slice(1)),0===e.length||e.split("&").forEach((function(e){var n,a,i=e.indexOf("=");-1===i?(n=e,a=""):(n=e.substr(0,i),a=e.substr(i+1)),t[n]=a})),t}}}(),function(e){c2.logging.getLogger(e);c2.quickSetup={requireUserToChooseOne:function(e,t){var n=$(e);function a(){var e=n.find("input[type=checkbox]"),a=$("a.wizard-pagination-next"),i=a.parent("li"),o=!!e.filter(":checked").length;o?(i.removeClass("no-tooltip-affordance").attr("data-toggle",null).attr("data-title",null),a.removeClass("disabled")):(i.addClass("no-tooltip-affordance").attr("data-toggle","tooltip").attr("data-title","Select at least one item to continue."),a.addClass("disabled")),window.wizards.enableStep(t,o)}$clearSelectionButton=n.closest(".dataTables_wrapper").find("a.clear-selection"),$checkboxes=n.find("input[type=checkbox]"),0!==$checkboxes.length&&(n.find("tbody").on("click",a),$clearSelectionButton.on("click",a),a())}}}("quickSetup"),function(e){"use strict";window.c2.scrolling={isScrolledToBottom:function(e){return e.scrollHeight-(e.scrollTop+e.clientHeight)<90},scrollToBottom:function(e){e.scrollTop=e.scrollHeight}}}(),function(e){"use strict";var t;c2.logging.getLogger(e);function n(){$("#search-results").find(".post_result").first().children("a").focus()}function a(){c2.navbar.openSubMenu(t),window.scroll(0,0),setTimeout((function(){$("#search-input").focus().select()}),200)}function i(e){var a=$("#search-results");a.css("min-height","150px"),c2.block.block(a);$.get("/search/?"+c2.querystring.stringify(e),(function(e){a.html(e),n(),c2.navbar.setupKeyNavigationOfMenu(t,t.find("ul.dropdown-menu")),c2.block.unblock(a)}))}c2.search={init:function(){t=$("[data-topnav=search]");var e=$("#search-input");e.clearable(),$("#navbar-search").on("click",".icon-delete",(function(e){$("#search-results").empty()})),c2.commonEventHandlers.registerGlobalKeyHandlers("search",{"/":function(e){c2.navbar.isSubMenuOpen(t)?c2.navbar.closeSubMenu(t):a(),e.preventDefault()}}),t.on("keydown.searchBindings",(function(e){"Escape"==e.key&&c2.navbar.isSubMenuOpen(t)&&(c2.navbar.closeSubMenu(t),e.preventDefault())})),e.on("keydown.searchBindings",(function(e){switch(e.key||e.keyCode){case"Escape":case 27:case"Esc":c2.navbar.closeSubMenu(t),$("#search-results").empty(),e.preventDefault();break;case"ArrowDown":case 40:case"Down":case"Tab":case 9:n(),e.preventDefault()}})),$("form#navbar-search").off("submit").on("submit",(function(e){e.preventDefault(),i({q:$("#search-input").val()})}))},openSearchSubMenu:a,setupSearchResultBehaviors:function(){var e=$("#search-results");e.data("behaviors-initialized")||(e.data("behaviors-initialized",!0),e.on("hover.searchBindings","ol > li",(function(e){$(this).find(".post_result > a").focus()})),t.on("click.searchBindings",".post_result",(function(e){!function(e,t){var n=e.find("a").attr("href"),a=!(!t.metaKey&&!t.ctrlKey&&2!=t.which);n&&(a?window.open(n,"_blank"):(c2.block.block(),window.location=n))}($(this),e)})),t.on("click.searchBindings",".search-result-pager a",(function(e){e.preventDefault(),i({q:$(this).data("query"),page:$(this).data("page")})})))}}}("search"),function(e){"use strict";var t=c2.logging.getLogger("selectize");c2.selectize=function(e,n){var a=$.extend({},{dropdownParent:"body",plugins:{selectable_placeholder:{}},selectOnTab:!0,sortField:"text"},n||{}),i=$(e);if(t.info("selectize settings:",a),0!==i.length){if(i.closest(".modal-dialog").length&&(a.dropdownParent=null),a.sortNumerically&&(a.sortField=null),a.suggest_options_field_name){var o=i.closest(".controls");0===o.length&&(o=i.parent()),a.load=function(e,n){if(!e.length)return n();var i=o.find(".selectized"),r="/suggest_options_for_selectize/"+a.suggest_options_field_name+"/";t.debug("Loading options for selectize with query:",e),$.get(r,{query:e},(function(e){if(e.options){var a=i[0].selectize.$dropdown;t.debug("  $dropdown orig width:",a.css("width")),a.css("min-width","600px"),n(e.options)}else console.error(e),n([{value:"",text:"An error occurred while looking up options"}])}))},a.loadThrottle=400}return i.selectize(a),i[0].selectize}console.log('c2.selectize did not find a target at $("'+e+'")')},c2.selectizeMultiple=function(e,t){return c2.selectize(e,$.extend({placeholder:"Choose one or more...",plugins:["remove_button","batch_toolbar"]},t||{}))}}(),Selectize.define("selectable_placeholder",(function(e){var t,n=this;0!==n.$input.children('option[value=""]').length&&(e=$.extend({placeholder:n.settings.placeholder,html:function(e){return'<div class="selectize-dropdown-content placeholder-container"><div data-selectable class="option">'+escape_html(e.placeholder)+"</div></div>"}},e),n.setup=(t=n.setup,function(){t.apply(this,arguments),n.$placeholder_container=$(e.html(e)),n.$dropdown.prepend(n.$placeholder_container),n.$dropdown.on("click",".placeholder-container",(function(){n.setValue(""),n.close(),n.blur()}))}))}));var escape_html=function(e){return(e+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")};Selectize.define("remove_button",(function(e){if("single"!==this.settings.mode){var t,n=$.extend({label:'<i class="fas fa-times"></i>',title:gettext("Remove"),className:"remove",append:!0},e),a=this,i='<a href="javascript:void(0)" class="'+n.className+'" tabindex="-1" title="'+escape_html(n.title)+'">'+n.label+"</a>",o=function(e,t){var n=e.search(/(<\/[^>]+>\s*)$/);return e.substring(0,n)+t+e.substring(n)};this.setup=(t=a.setup,function(){if(n.append){var e=a.settings.render.item;a.settings.render.item=function(t){return o(e.apply(this,arguments),i)}}t.apply(this,arguments),this.$control.on("click","."+n.className,(function(e){if(e.preventDefault(),!a.isLocked){var t=$(e.currentTarget).parent();a.setActiveItem(t),a.deleteSelection()&&a.setCaret(a.items.length)}}))})}})),Selectize.define("batch_toolbar",(function(e){if("single"!==this.settings.mode){var t,n=this,a=$.extend({skipChangeEvent:!0,labelAll:'<i class="fas fa-asterisk"></i>',labelClear:'<i class="fas fa-times"></i>',titleAll:gettext("Select all items"),titleClear:gettext("Clear selection")},e),i=function(e){e.preventDefault(),n.isLocked||_.forEach(n.options,(function(e){n.addItem(e.value,a.skipChangeEvent)}))},o=function(e){e.preventDefault(),n.isLocked||n.clear(a.skipChangeEvent)},r=$('<div class="selectize-toolbar btn-group"></div>'),l=function(){var e=$('<button class="select-all-options btn btn-default btn-xs" data-toggle="tooltip" title="'+escape_html(a.titleAll)+'">'+a.labelAll+"</button>").on("click",i),t=$('<button class="select-no-options btn btn-default btn-xs" data-toggle="tooltip" title="'+escape_html(a.titleClear)+'">'+a.labelClear+"</button>").on("click",o);r.append(e).append(t),r.insertAfter(n.$control)};this.setup=(t=n.setup,function(){t.apply(this,arguments),l()})}})),function(e,t,n){"use strict";var a,i,o,r,l=t.logging.getLogger(e),s={shortInterval:moment.duration(10,"seconds"),mediumStart:moment.duration(5,"minute"),mediumInterval:moment.duration(1,"minute"),longStart:moment.duration(1,"hour"),longInterval:moment.duration(5,"minute")};moment.duration(5,"seconds"),moment.duration(20,"seconds"),moment.duration(10,"seconds"),moment.duration(60,"seconds"),moment.duration(20,"seconds");function c(e,t){n("#server-details-live-updates-info").removeClass("hidden"),t?n("#offline-alert").addClass("hidden"):(l.error("  data-include failed to load for el: ",e),f(),n("#offline-alert").removeClass("hidden"))}function d(){l.debug("startUpdates"),a?l.debug("  timers already set, skipping."):(l.debug("Setting up short term update interval: "+r.shortInterval.asSeconds()+"s"),a=setInterval(u,r.shortInterval.asMilliseconds()),i=setTimeout((function(){l.debug(r.mediumStart.asMinutes()+"m have passed; starting medium term update interval every "+r.mediumInterval.asSeconds()+"s"),f(),a=setInterval(u,r.mediumInterval.asMilliseconds())}),r.mediumStart.asMilliseconds()),o=setTimeout((function(){l.debug(r.longStart.asMinutes()+"m have passed; starting long term update interval every "+r.longInterval.asSeconds()+"s"),f(),a=setInterval(u,r.longInterval.asMilliseconds())}),r.longStart.asMilliseconds()))}function u(){l.debug("reloadSections"),"loading"!==t.include.getState("#server-details-sidebar")&&t.include.reload("#server-details-sidebar"),t.include.reload("#server-details-panel-organization")}function f(){l.debug("stopUpdates"),clearInterval(a),clearTimeout(i),clearTimeout(o),a=0,i=0,o=0}t.server={liveUpdates:function(e,a){r=s,l.debug(r),n(document).on("cb.inlineEdits.loaded",f),n(document).on("cb.inlineEdits.closed",d),function(e,t){var a=n("#server-details-sidebar");a.attr("data-include",e),a.attr("data-include-error",!1),a.attr("data-include-callback",c);var i=n("#server-details-panel-organization");i.attr("data-include",t),i.attr("data-include-error",!1),i.attr("data-include-callback",c)}(e,a),u(),d(),t.visibility.onChange((function(e){e?(l.debug("page hidden"),f()):(l.debug("page visible"),d())})),n(document).on("click","#refresh-server-details",(function(e){f(),u(),d()}))},setActionButtonStates:function(e,t,a,i){t||n('#server-actions [data-role="modifies"]').addClass("disabled"),a||n('#server-actions [data-role="accesses-console"]').addClass("disabled"),i||n('#server-actions [data-role="deletes"]').addClass("disabled")},stopUpdates:f}}("server",window.c2,window.jQuery),function(e,t){"use strict";var n=t.logging.getLogger(e),a={},i=[];function o(e){if(n.debug("drawCharts\n  chartSettings: ",a),a&&void 0===a.cpuValues)n.debug("This server has no stats, so not drawing charts.");else{e&&(i=e);var o=_.filter(i,(function(e){return e.epoch_ms>=a.startTime}));n.debug("  serverEvents:",o),Highcharts.setOptions({global:{useUTC:!1}}),t.charts.drawServerCPUStatsChart(a.startTime,a.interval,a.cpuValues,o,t.charts.commonStatChartOpts),t.charts.drawServerMemStatsChart(a.startTime,a.interval,a.memValues,o,t.charts.commonStatChartOpts),t.charts.drawServerDiskStatsChart(a.startTime,a.interval,a.diskValues,o,t.charts.diskStatChartOpts),t.charts.drawServerNetStatsChart(a.startTime,a.interval,a.netValues,o,t.charts.netStatChartOpts)}}t.serverStats={init:function(e){n.debug("init called with settings: ",e);var t=(new Date).getTime();(a=e).startTime=t-a.interval*a.points*1e3,void 0!==$("#history").data("table-source")&&o()},drawCharts:o}}("serverStats",window.c2),function(e){"use strict";function t(e){var t=$(this).parent(),a=t.find("input"),i=t.find(".slider-value"),o=e.value&&void 0!==e.value.newValue?e.value.newValue:"";i.html(o+n(a))}function n(e){var t;return(t=e.data("slider-units"))?"&nbsp;"+t:""}window.c2.sliders={init:function(e,a){var i,o,r=$(e||".sliderize"),l=_.merge(a||{},{handle:"custom",tooltip:"hide"});r.each((function(){i=$(this),o=i.val()||i.data("initial-value")||i.data("slider-min"),i.attr("data-slider-value",o||""),o&&(l.value=parseFloat(o)),i.slider(l),i.removeClass("sliderize"),i.on("change",$.throttle(100,t)),i.after('<span class="slider-value">'+l.value+n(i)+"</span>")}))}}}(),function(e){"use strict";var t=c2.logging.getLogger(e);function n(e){return null==e?"":"string"==typeof e?e.trim():e}function a(e){return e.closest(".form-group").find(".slider").length?"slideStop":"change"}function i(e,n){-1!=e.indexOf(!0)&&-1==e.indexOf("True")&&e.push("True"),-1!=e.indexOf(!1)&&-1==e.indexOf("False")&&e.push("False");var a,i=function(e){var n;return n=e.is(":checkbox")?e.prop("checked"):e.val(),t.debug("  Controlling field:",e),t.debug("  Value of controlling field:",n),n}(n);if(t.debug("  Values to show dependent field:",e),0===e.length)a=null!==i&&0!==i.length;else{var o=n.data("delimiter");a=(Array.isArray(i)?i:void 0!==o?i.split(o):[i]).some((function(t){return-1!==$.inArray(t,e)||-1!==$.inArray(parseInt(t),e)||-1!==$.inArray(parseFloat(t),e)}))}return t.debug("  Found a match:",a),a}var o={showhide:function(e,n){var a;t.debug("Processing dependent field for show/hide ",e);for(var o,l=n.find("#"+e),s=!0,c=l.attr("data-control"),d=JSON.parse(c),u=0;u<d.length;u++)if(t.debug("  control_data[i]:",d[u]),0!==(a=r(d[u],n,l)).length)if("showhide"in d[u]){if(0==(o=a.data("is-visible"))){t.debug("  Controlling field seems to not be visible, will hide dep field ",o),s=!1;break}if(!(s=i(d[u].showhide.when,a))){t.debug("  Controlling field seems is visible but not matching, will hide dep field ");break}}else t.debug(d[u]," not related to show/hide; skipping.");else t.debug("  No controlling field",d[u]," found; skipping.");!function(e,n){var a=n.closest(".form-group");e?(t.debug("  Showing dependent field ",n),a.data("dependent-field-visible",!0).fadeIn(400),n.closest(".controls").css("overflow","visible"),n.prop("disabled",!1),n.data("is-visible",!0),n.data("dependent-field-seen",!0)):(t.debug("  Hiding dependent field ",n),a.data("dependent-field-visible",!1),n.data("dependent-field-seen")?a.fadeOut(400):a.hide(),n.prop("disabled",!0),n.data("is-visible",!1),n.parents(".has-error").removeClass("has-error"))}(s,l),l.trigger("smartFields.changed")},regenoptions:function(e,a){var i;t.debug("Processing dependent field for regenerating options ",e);for(var o=a.find("#"+e),l=o.attr("data-control"),s=JSON.parse(l),c=0;c<s.length;c++)if(t.debug("  control_data[i]:",s[c]),0!==(i=r(s[c],a,o)).length)if("regenoptions"in s[c]){var d=o.closest(".controls");c2.block.block(d,!0);var u=s[c].target,f=s[c].source,p=o.closest(".service-item").find('select[name$="-environment"]'),g=!1;p.prop("disabled")&&(g=!0,p.prop("disabled",!1));var h=o.closest("form"),v=o.closest("form").serializeArray();v=v.filter((function(e){if(!e.name.includes("_metadata"))return e}));var m=h.prop("action");g&&p.prop("disabled",!0);var b=i.attr("name").replace(f,"");b=b.replace(/-$/,""),v.push({name:"form-prefix",value:b}),v.push({name:"form-action",value:m});var w="/regenerate_options_for_field/"+u+"/"+f+"/?"+$.param(v);t.debug(" Url is ",w),$.get(w,(function(e){if(e.error){var a=$('<div class="alert alert-danger"></div>').text(e.error);t.debug(a),d.html(a)}else{t.debug("response.options: ",e.options);var i=e.options,r={};void 0!==o.attr("data-selectize-args")&&(r=JSON.parse(o.attr("data-selectize-args")));var l=c2.selectize(o,r),s=function(e){e.preventDefault(),e.stopImmediatePropagation()};$.fn.bindFirst=function(e,t){this.on(e,t),this.each((function(){var t=$._data(this,"events")[e.split(".")[0]],n=t.pop();t.splice(0,0,n)}))},o.bindFirst("change",s),l.clearOptions(!0),$.each(i,(function(e,t){var a=n(t[0]),i=n(t[1]);l.addOption({value:a,text:i})}));var c=e.initial_value,u=null===c,f=null!==i[0]&&void 0!==i[0],p=r.required;u&&f&&p&&(c=i[0][0]),null!==c&&(Array.isArray(c)&&(c=c[0]),c=n(c)),l.setValue(c,!0),d.css("overflow","visible")}c2.block.unblock(d),o.off("change",s),o.trigger("change")}))}else t.debug(s[c]," not related to regenerating options; skipping.");else t.debug("  No controlling field",s[c]," found; skipping.")}};function r(e,n,a){t.debug('getControllingField "'+e.source+'"'),t.debug("  for dep field ",a);var i=a.closest(".service-item");if(0!==i.length){var o=i.find('[name$="-'+e.source+'"]');return t.debug("  ==> $controlField from order form:",o),o}t.debug("  Dep field has no service item ancestor");o=n.find('[name="'+e.source+'"]').first();return t.debug("  ==> $controlField from action input form:",o),o.hasClass("codeeditorwidget")&&t.error("Code editor widgets cannot be controlling fields."),o}c2.smartFields={init:function(e){e.find("[data-control]").each((function(){!function(e,n){var i,l,s;if(t.debug("Initialize dependent field:",e),!(i=e.attr("data-control")))return void t.debug("  No control data; skipping");l=JSON.parse(i);for(var c=0;c<l.length;c++)if(t.debug("  control_data[i]:",l[c]),0!==(s=r(l[c],n,e)).length){var d=Object.keys(l[c]);d.splice(d.indexOf("source"),1);var u=d.indexOf("target");u>-1&&d.splice(u,1);var f=d[0];t.debug("  Handler name:",f);var p=o[f],g=a(s);s.on("smartFields.changed "+g,(function(a){t.debug("Handling event: ",a),p(e.attr("id"),n)}))}else t.debug("  No controlling field found; skipping.")}($(this),e)}));var n=e.find("[data-root-fields]").addBack("[data-root-fields]").map((function(){return $(this).attr("data-root-fields")})).get().join(",").split(",");t.debug("Root fields: ",n),$.each(n,(function(e,t){t.length>0&&$("[id^='id_'][id$='"+t+"']").trigger("smartFields.changed")})),$("[id^='id_form-'][id$='-os_build']").each((function(e,t){$(t).trigger("smartFields.changed")}))}}}("smartFields"),function(e,t,n){"use strict";function a(){var e=t(this),n=e.find(".panel");n.length<=1||(n.addClass("sortable").find(".panel-heading").each((function(e){t(this).prepend('<span class="move-to-top-or-bottom">  <i class="fas fa-angle-double-up"></i>  <i class="fas fa-angle-double-down"></i></span><span class="sortable-handle">  <i class="fas fa-bars"></i></span><span class="sort-seq">'+(e+1)+"</span>")})),e.find(".fa-angle-double-down, .fa-angle-double-up").on("click",(function(){var e=t(this),n=e.hasClass("fa-angle-double-up"),a=e.closest("li"),o=a.parent();i(a,n?o.children("li:first-child"):o.children("li:last-child")),o.triggerHandler("sortupdate",{item:a})})),e.find(".sort-seq").on("click",(function(){var e=t(this),n=e.closest("li"),a=n.parent(),o=e.text();e.text(""),e.append('<input type="number" class="sort-seq-input" />');var r=t(".sort-seq-input");r.focus(),r.on("click",(function(e){e.stopPropagation()})),r.on("keydown",(function(r){var l=t(this);if("Enter"===r.key){var s,c=l.val();if(l.off(),l.remove(),c)s=c<1?a.children("li:first-child"):c>=a.children("li").length?a.children("li:last-child"):a.children("li:nth-child("+c+")"),i(n,s),a.triggerHandler("sortupdate",{item:n});else e.text(o);l.remove()}"Escape"===r.key&&(l.off(),l.remove(),e.text(o))})),r.on("blur",(function(){var n=t(this);n.off(),n.remove(),e.text(o)}))})))}function i(e,n){var a=t(e),i=t(n),o=a.offset();i.index()<a.index()?a.insertBefore(i):a.insertAfter(i);var r=a.offset(),l=a.clone().appendTo("body");l.css({position:"absolute",left:o.left,top:o.top,"z-index":1e3,width:a.width()}),a.css("visibility","hidden"),l.animate({top:r.top,left:r.left},"slow",(function(){a.css("visibility","visible"),l.remove()}))}function o(e){var a=e.find(".sortable-handle").toArray();return n.map(a,(function(e,n){var a=t(e),i=a.closest(".panel").data("id");return i&&a.siblings(".sort-seq").text(n+1),i}))}e.sortable={resequenceSortables:o,sortablePanels:function(n,i,r){t(n).each(a).sortable({handle:".sortable-handle",forcePlaceholderSize:!0}).bind("sortupdate",(function(a,l){var s=l.item.closest(n),c=o(s);t.post(i,{seq:c},(function(t){t.error&&e.alerts.addGlobalAlert(t.error,"error",!0,5e3)})),void 0!==r&&r(s)}))}}}(window.c2,window.jQuery,window._),function(e){"use strict";window.c2.sparklines={init:function(e){$(e||".sparkline").each((function(e,t){$(t).sparkline("html",{height:"18px",type:"bar",chartRangeMin:"0",disableTooltips:!0,highlightColor:"#9999FF",colorMap:$(t).data("colors").split(",")})}))}}}(),function(e){"use strict";var t=c2.logging.getLogger(e);function n(){var e=$(this);t.debug("Initializing a spotlight search field:",e);var n=e.closest(".spotlight-search-bar"),l=n.find(".spotlight-results"),s=o(n);t.debug("  Spotlightable items:",s);var c=_.map(s,(function(e){var t=$(e);return{text:t.text(),keywords:t.data("spotlight")||""}}));t.debug("  sifter search engine data:",c);var d=new Sifter(c);e.on("keydown.spotlight",(function(e){switch(t.debug("keydown event on spotlight search field:",e),e.key){case"ArrowDown":case"Down":case"Tab":return l.find("a").first().focus(),void e.preventDefault()}setTimeout((function(){!function(e,t,n,o,l){var s=$(e.target).val();if(""===s)return void i(l);var c=n.search(s,{fields:["text","keywords"]}),d=_.at(t,_.map(c.items,"id"));a(t),function(e){$(e).each((function(){var e=$(this);e.addClass("spotlight");var t=e.closest(".collapse");t.hasClass("in")||t.collapse("show")}))}(d),function(e,t){var n=e.find("ol");if(n.html(""),0===t.length)return void n.append($("<li><i>No matches on page.</i></li>"));$(t).each((function(){r(n,$(this))})),function(e){if(e.data("behaviors-initialized"))return;e.data("behaviors-initialized",!0),$(document).on("click",(function(t){$(t.target).closest(".spotlight-results").length||e.removeClass("active")})),e.on("mouseover.spotlight","a",(function(e){$(this).focus()})),$(document).on("keydown.spotlight",".spotlight-results",(function(e){if(!e.key.metaKey&&!e.key.ctrlKey){var t=$(this),n=t.find("a"),a=document.activeElement,o=n.index(a);switch(e.key){case"ArrowDown":case"Down":o<n.length-1&&n.eq(o+1).focus(),e.preventDefault();break;case"ArrowUp":case"Up":0===o?$(this).closest(".spotlight-search-bar").find("input").select():n.eq(o-1).focus(),e.preventDefault();break;case"Escape":case"Esc":i(t),e.preventDefault()}}}))}(e),e.addClass("active")}(l,d)}(e,s,d,0,l)}),1)}))}function a(e){$(e).removeClass("spotlight")}function i(e){e.removeClass("active");var t=e.find("ol"),n=e.closest(".spotlight-search-bar");a(o(n)),t.html(""),n.find("input[data-spotlight-search]").val("").focus()}function o(e){var t=e.find("input[data-spotlight-search]").data("spotlight-search")||"body";return document.querySelectorAll(t+" [data-spotlight]")}function r(e,t){"A"==t[0].tagName?e.append($("<li></li>").append(function(e){var t=e.clone();return t.removeClass("spotlight"),t.removeAttr("data-spotlight"),t}(t))):"collapse"==t.data("toggle")&&$(t.data("target")).find("a[data-spotlight]").each((function(){r(e,$(this))}))}window.c2.spotlight={init:function(){$("input[data-spotlight-search]").each(n)}}}("spotlight"),function(e){"use strict";c2.logging.getLogger(e);var t=function(){return"c2.tabs.active."+window.location.pathname};function n(e){if(""===e)return!1;var t=$('a[data-toggle=tab][href="#'+e+'"]');return t.tab("show"),!!t.length}c2.tabs={init:function(){setTimeout((function(){var e;$('a[data-toggle="tab"]').on("shown.bs.tab",(function(e){var n=this.hash.slice(1);!function(e){history.replaceState&&history.replaceState({},"","#"+e)}(n),function(e){var n=t();localStorage.setItem(n,e)}(n)})),n(location.hash.slice(1))||(e=t(),n(localStorage.getItem(e)))}),50)}}}("tabs"),function(e,t){"use strict";e.text={enableDoubleClickSelection:function(e){t(e).on("dblclick","[data-dblclickable]",(function(e){e.preventDefault(),t(this).selectText()}))}}}(window.c2,window.jQuery),function(e,t){"use strict";e.toggles={enablePostOnChange:function(e){var n=t(e||"input[data-toggle=toggle]");n.off("change"),n.on("change",(function(e){var n=t(this),a=n.data("post-url"),i=n.data("reload-page-on-toggle"),o={};o[n.attr("name")]=n.prop("checked"),t.post(a,o,(function(e){null!==e&&e.redirectURL&&(window.location.href=e.redirectURL),"True"===i&&location.reload(!0)}))}))}}}(window.c2,window.jQuery),function(e){"use strict";var t,n;function a(e){var t=$(e.target),n=t.data("maxWidth"),a=t.data("placement"),i=t.data("bs.tooltip");n&&i.tip().find(".tooltip-inner").css("max-width",n),a&&(i.options.placement=a)}function i(){$("#tooltip-container").html("")}window.c2.tooltip={init:function(e){void 0===e&&(e=$(document)),document.getElementById("tooltip-container")||($('<div id="tooltip-container"></div>').appendTo("body"),$(document).tooltip({selector:"[data-toggle=tooltip]",placement:"auto top",delay:{show:500,hide:100},container:"#tooltip-container"}),t=$(document).data("bs.tooltip"),n=t.options.template,$("<div></div>").append(n)),function(e){var t,n;e.find("[data-tooltip-source]").each((function(){t=$(this),n=$(t.data("tooltip-source")),t.attr("title",n.html())}))}(e),e.tooltip({selector:"[data-toggle=tooltip]",placement:"auto top",delay:{show:500,hide:100},container:"#tooltip-container"}),$(document).on("show.bs.tooltip",a),$("#tooltip-container").on("click",".tooltip",i)},closeAll:function(){$("#tooltip-container").html("")}}}(),function(e){"use strict";var t,n,a,i,o,r=24,l=["#AFE0AF","#FFAE90","#9AC4E6","darkseagreen","coral","skyblue","green","darkorange","steelblue"],s=_.map(l,(function(e){return d3.rgb(e).darker(.3)})),c="#D2EFFF",d="#8CC0DA",u=140;e.topology={init:function(e,f,p,g,h,v,m){o=v||60,a=m||200,i=f.length*o,t=i+100+a||600,n=h||1e3;var b=d3.select(e).append("svg").attr("width",n).attr("height",t);!function(e,t){var a=12,i=e.selectAll("g").data(t).enter().append("g").attr("class","net").attr("transform",(function(e,t){return"translate(0,"+(t*o+1)+")"}));i.append("rect").style("fill",(function(e,t){return l[t]})).style("stroke",(function(e,t){return s[t]})).style("stroke-width","2px").attr("width",n-6).attr("height",r).attr("transform",(function(e,t){return"translate(2, 0)"})),i.append("text").attr("x",10).attr("y",r-(r-a)/2).text((function(e){return e.ipv4_block||e.name||e.network}))}(b,f),function(e,t,n){var a=150,o=e.selectAll("g.node").data(t).enter().append("g").attr("class","node").attr("id",(function(e,t){return"node-"+t})).attr("transform",(function(e,t){return"translate("+(170*t+a)+", "+(i+100)+")"}));o.append("rect").style("fill",c).style("stroke",d).style("stroke-width","2px").attr("width",u).attr("height",80).attr("rx","8"),o.append("text").attr("x",14).attr("y",14).attr("class","name").style("alignment-baseline","middle").text((function(e,t){return 1!=e.quantity&&function(e,t){var n,a=d3.select("#node-"+e),i=137,o="#335b83",r=4,l=-2,s=4,f=(t||s+1)-1;f>s&&(f=s);for(var p=0;p<f;p+=1)n=.7-.15*p,a.insert("rect","rect").attr("x",r*(p+1)).attr("y",l*(p+1)).attr("width",u).attr("height",80).attr("rx","8").style("stroke",d).style("stroke-opacity",n).style("stroke-width","2px").style("fill",c).style("fill-opacity",n);1!=t&&(a.append("text").attr("x",i).attr("y",2).attr("class","qty").attr("text-anchor","middle").style("fill","#fff").text(t||"?"),a.insert("circle","text").attr("cx",i).attr("cy",-3).attr("r",13).style("stroke",(function(e,t){return d3.rgb(o).darker(.5)})).style("fill",o))}(t,e.quantity),e.name})),o.append("image").attr("x",13).attr("y",50).attr("class","os-family-icon").attr("width","20px").attr("height","20px").attr("xlink:href",(function(e){return e.os_family_icon}))}(b,p),function(e,t,n){var a,i,o,l,s,c,d,u=e.selectAll("g.node"),f=e.selectAll("g.net"),p=_.indexBy(f[0],(function(e){return e.__data__.id})),g=/(\d+), ?(\d+)/;u.each((function(t){for(c=this.attributes.transform.value.match(g),a=parseInt(c[1])+70-30,i=c[2],l=_.values(t.nics),d=l.length;d--;)1==l[d].length?(s=p[l[d][0]],o=s.attributes.transform.value.match(g)[2],o=parseInt(o)+r,e.append("rect").style("fill",s.firstChild.style.stroke).attr("x",a+20*d).attr("width",8).attr("y",o).attr("height",i-o)):console.log("More than one option, no line will be drawn!")}))}(b)}}}(window.c2),function(e,t){"use strict";var n,a,i;e.visibility={onChange:function(e){if(void 0===n&&function(){if(void 0!==document.hidden)return a="hidden",i="visibilitychange",void(n=!0);if(void 0!==document.msHidden)return a="msHidden",i="msvisibilitychange",void(n=!0);if(void 0!==document.webkitHidden)return a="webkitHidden",i="webkitvisibilitychange",void(n=!0);n=!1}(),!1===n)return console.log("Visibility API is not supported on this platform."),!1;document.addEventListener(i,(function(t){e(document[a])}),false)},offChange:function(e){document.removeEventListener(i,e,false)}}}(window.c2,window.jQuery);
//# sourceMappingURL=c2.min.js.map
