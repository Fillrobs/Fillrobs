<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="MobileOptimized" content="width">
  <meta name="HandheldFriendly" content="true">
  <script type="text/javascript">
    var addThisScriptUrl = 'https://s7.addthis.com/js/300/addthis_widget.js';
  </script>
  <link rel='shortcut icon' href='../_webHelpImages/cloudbolt-login-logo.png' /><link rel='icon' href='../_webHelpImages/cloudbolt-login-logo.png' />
  <link rel='stylesheet' type='text/css' href='../_webHelpStyles/CHWebHelp.css?t=637806378603891771'/><link rel='stylesheet' type='text/css' href='../_webHelpStyles/CommonControls.css?t=637806378603891771'/><link rel='stylesheet' type='text/css' href='../_webHelpStyles/CommonControls/FontAwesome/css/font-awesome.min-ignore.css?t=637806378603891771'/><link rel='stylesheet' type='text/css' href='../_webHelpStyles/z-Branding.css?t=637806378603891771'/>
  <script  src='../_webHelpScripts/Master/1-script.js?t=637806378603891771' type='text/javascript'></script><script  src='../_webHelpScripts/Master/toc_nav.js?t=637806378603891771' type='text/javascript'></script>
  <link rel="stylesheet" href="https://cdn.materialdesignicons.com/5.0.45/css/materialdesignicons.min.css">
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
<script src="https://kit.fontawesome.com/68d03bdd6e.js" crossorigin="anonymous"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css">
<script type="text/javascript">//<!--
appendEventHandler(window, 'load', function() {webHelpSelectTocNodeByExtId('user-permission-and-attribute-synchronization',true);});
//--></script><title>User Permission and Attribute Synchronization</title><script type="text/javascript">//<!--
var articleTitleText='User Permission and Attribute Synchronization';
//--></script><link rel="stylesheet" type="text/css" href="../Styles/article-published.css"/><link rel="stylesheet" type="text/css" href="../Styles/cloudbolt-docs/CloudBoltBranding.css"/><script src="../Scripts/article-published.js" type="text/javascript"></script><script src="../Scripts/cloudbolt-docs/Script1.js" type="text/javascript"></script><script src="../Scripts/cloudbolt-docs/Script2.js" type="text/javascript"></script><meta charset="utf-8"><meta http-equiv="Content-Type" content="text/html;charset=utf-8">
  
</head>
<body class="WebHelp_body">
  <div id="pnlContainer" class="CHOffCanvasPanel_container">
    <div class="CHOffCanvasPanel_content">
      <nav id="pnlOffCanvasNav" class="CHOffCanvasPanel_nav noselect">
        <div id="pnlOffCanvasHeader" class="BaseMaster_offCanvasHeader">
        </div>
        <script  type='text/javascript'>//<!--
window['mobileMenu']=new CHMenu('pnlOffCanvasHeader',{"cssClasses":{"menu":null,"popup":null},"templates":{"itemContent":null,"treeItemContent":null,"dropDownArrow":null},"isMobileViewIfParentOverflow":false,"mobileViewMinWidthThreshold":-1,"selectedItemId":"tabContents","isAllowItemSelection":true,"isEscapeMenuItemText":true,"isUseFontAwesomeIcons":true,"fontAwesomeVersion":"4","isMovePopupToBodyChildLevel":true,"isShowPopupOnHover":false},[{"id":"menuItemMenu","t":"Menu","imgs":{},"c":[],"s":-1,"d":0,"e":0,"isNoFocus":false,"vals":{"_faIconCssClass":""}},{"id":"tabContents","t":"Topics","imgs":{},"c":[],"s":-1,"d":0,"e":0,"isNoFocus":false,"vals":{"_faIconCssClass":""}},{"id":"tabSearch","t":"Search","imgs":{},"c":[],"s":-1,"d":0,"e":0,"isNoFocus":false,"vals":{"_faIconCssClass":""}}]);window['mobileMenu'].onItemClick=function(s,e){webHelpMobileMenuItemClick(s,e);};
//--></script>
        <div id="pnlOffCanvasContent" class="BaseMaster_offCanvasContent">
        </div>        
      </nav>
      <div id="pnlOffCanvasOverlay" class="CHOffCanvasPanel_overlay"></div>
      <nav id="pnlMainMenuContainer" class="BaseMaster_mainMenuContainer">
        <button type="button" aria-label="Show mobile menu" title="Show mobile menu" id="btnMobileMenu" style="display:none"
          class="CHHamburger_container CHHamburger_container-htla BaseMaster_hamburgerMenuIcon">
          <span></span>
        </button>
        <a title='CloudBolt Software' href='https://cloudbolt.io' target='_blank'><img alt='CloudBolt Software' class='BaseMaster_imgLogo' src='../_webHelpImages/cloudbolt_line_transparent_white_FINAL.png' /></a>
        <div id="pnlMainMenu" class="BaseMaster_pnlMainMenu"></div>
        <script  type='text/javascript'>//<!--
window['mainMenu']=new CHMenu('pnlMainMenu',{"cssClasses":{"menu":null,"popup":null},"templates":{"itemContent":null,"treeItemContent":null,"dropDownArrow":null},"isMobileViewIfParentOverflow":true,"mobileViewMinWidthThreshold":979,"selectedItemId":null,"isAllowItemSelection":false,"isEscapeMenuItemText":true,"isUseFontAwesomeIcons":true,"fontAwesomeVersion":"4","isMovePopupToBodyChildLevel":true,"isShowPopupOnHover":false},[{"id":"926ab37c-af98-eab8-2cb6-f0224c32b59e","t":"Getting Support","imgs":{},"c":[],"s":0,"d":0,"e":1,"isNoFocus":false,"vals":{"actionType":"OpenLink","_customCssClass":null,"_url":"https://support.cloudbolt.io/","_target":"_blank"}},{"id":"a93dc193-cfa0-0c55-dc87-ef748c016d3e","t":"CloudBolt API","imgs":{},"c":[],"s":0,"d":0,"e":1,"isNoFocus":false,"vals":{"actionType":"OpenArticle","_customCssClass":null,"_url":"http://docs.cloudbolt.io/articles/cloudbolt-latest-docs/cloudbolt-api-v3","_target":"_blank"}},{"id":"1d7d67de-8445-1336-084c-3d22cc440080","t":"Documentation Portal","imgs":{},"c":[],"s":0,"d":0,"e":1,"isNoFocus":false,"vals":{"actionType":"OpenLink","_customCssClass":null,"_url":"https://docs.cloudbolt.io/"}},{"id":"d4ac0703-4b0e-d846-4521-45b57775c8f2","t":"Knowledge Base","imgs":{},"c":[],"s":0,"d":0,"e":1,"isNoFocus":false,"vals":{"actionType":"OpenLink","_customCssClass":null,"_url":"https://support.cloudbolt.io/hc/en-us/sections/201319545-Knowledge-Base","_target":"_blank"}}]);window['mainMenu'].onViewSwitched=function(s,e){webHelpMasterPageMainMenuViewSwitched(s,e);};
//--></script>
        <div class="WebHelp_searchBoxContainer">
          <input id="edtSearch" type="search" class="WebHelp_searchBox" aria-label="Search" />
          <button id="btnSearch" class="btnSearch" alt="Search" title="Search" aria-label="Search" href="javascript:void(0)"></button>
        </div>
      </nav>
      <div id="pnlContentContainer" class="BaseMaster_contentContainer clearfix">
        <nav id="pnlArticlesNav" class="WebHelp_navPanel">
          <div id="pnlNavTabs" class="WebHelp_navMenu"></div>
          <script  type='text/javascript'>//<!--
window['navMenu']=new CHMenu('pnlNavTabs',{"cssClasses":{"menu":null,"popup":null},"templates":{"itemContent":null,"treeItemContent":null,"dropDownArrow":null},"isMobileViewIfParentOverflow":false,"mobileViewMinWidthThreshold":-1,"selectedItemId":"tabContents","isAllowItemSelection":true,"isEscapeMenuItemText":true,"isUseFontAwesomeIcons":true,"fontAwesomeVersion":"4","isMovePopupToBodyChildLevel":true,"isShowPopupOnHover":false},[{"id":"tabContents","t":"Topics","imgs":{},"c":[],"s":-1,"d":0,"e":0,"isNoFocus":false,"vals":{"_faIconCssClass":""}},{"id":"tabSearch","t":"Search","imgs":{},"c":[],"s":-1,"d":0,"e":0,"isNoFocus":false,"vals":{"_faIconCssClass":""}}]);window['navMenu'].onItemClick=function(s,e){webHelpNavMenuItemClick(s,e);};
//--></script>
          <div id="pnlTocContainer" class="WebHelp_navPanelContent ArticleSelector_tabContent TocTreeLight_container">
            <div id="pnlToc"></div>
          </div>
          <div id="pnlIndex" class="WebHelp_navPanelContent ArticleSelector_tabContent" style="display:none">
            <iframe id="frameIndex" style="height: 100%; width:100%; display:block;" frameborder="0"></iframe>
          </div>
          <div id="pnlSearch" class="WebHelp_navPanelContent ArticleSelector_tabContent" style="display:none">
            <iframe id="frameSearch" style="height: 100%; width:100%; display: block;" frameborder="0"></iframe>
          </div>
        </nav>
        <article class="TopicViewer_container">
          <header id="pnlTopicHeader" class="TopicViewer_header"  style='display:none'>
            <div id="pnlSocial" class="TopicViewer_headerShare">Share: </div>
            <div class="TopicViewer_headerText">
              <div class="ArticleEditor_projectName">cloudbolt_docs</div>
              <strong id="pnlTitle" class="ArticleEditor_title">User Permission and Attribute Synchronization</strong>
              <button type="button" id="btnPrint" class="CHImageButton ArticleEditor_imageButton ArticleEditor_fontAwesomeButton ArticleEditor_btnPrint" title="Print this topic">
                <i class="fa fa-print"></i>
              </button>
            </div>
          </header>
          <div id="pnlTopicContentContainer" class="TopicViewer_contentContainer">
            <!-- START ARTICLE CONTAINER -->
<div class="container">
  <div class="articleBreadcrumb">
    <span class="CHBreadcrumb"><span class="CHBreadcrumb_item CHBreadcrumb_itemHome"><a href="/" target="_top">Home</a></span><span class="CHBreadcrumb_separator">›</span><span class="CHBreadcrumb_item">CloudBolt Reference</span><span class="CHBreadcrumb_separator">›</span><span class="CHBreadcrumb_item"><a href="groups-permissions.html">Groups, Roles, and Permissions</a></span><span class="CHBreadcrumb_separator">›</span><span class="CHBreadcrumb_item CHBreadcrumb_itemSelf">User Permission and Attribute Synchronization</span></span>
  </div><p>
</p>
<h1 id="h1_135522215" data-has-heading-anchor="true">
  User Permission and Attribute Synchronization<a href="user-permission-and-attribute-synchronization.html#h1_135522215" class="CHHeadingLink" title="Link to this heading" aria-hidden="true"></a></h1><p>Some IT shops prefer to manage user permissions, group membership, and user attributes in Active Directory instead of in the CloudBolt UI. This page explains how to set up and customize that synchronization.
</p>
<div id="how-it-works">
  <ul class=""><li class="CHMiniToc_heading2"><a href="user-permission-and-attribute-synchronization.html#h2_1189924927">How It Works</a></li><li class="CHMiniToc_heading2"><a href="user-permission-and-attribute-synchronization.html#h2_1939259882">Using the “User Permission Sync From LDAP” Action</a></li><li class="CHMiniToc_heading2"><a href="user-permission-and-attribute-synchronization.html#h2_1364829566">Synchronizing User Attributes from LDAP</a></li><li class="CHMiniToc_heading2"><a href="user-permission-and-attribute-synchronization.html#h2_1323855563">Creating Custom Actions</a></li><li class="CHMiniToc_heading2"><a href="user-permission-and-attribute-synchronization.html#h2_1339110283">Testing It</a></li></ul>
  <h2 id="h2_1189924927" data-has-heading-anchor="true">
    How It Works
  <a href="user-permission-and-attribute-synchronization.html#h2_1189924927" class="CHHeadingLink" title="Link to this heading" aria-hidden="true"></a></h2>
  <p>
    Whenever an “external user” (one who is authenticating with credentials in an external source), logs into CloudBolt, CloudBolt runs all enabled actions for the “External User Sync” trigger point. These actions can run arbitrary code to fetch that user’s permissions and attributes in an external system (like AD) and then add/remove the user to the appropriate groups and roles in CloudBolt. This happens synchronously, meaning that the user will not be logged in and be able to use the UI until these CB actions complete.
  </p>
</div>
<div id="using-the-user-permission-sync-from-ldap-action">
  <h2 id="h2_1939259882" data-has-heading-anchor="true">
    Using the “User Permission Sync From LDAP” Action
  <a href="user-permission-and-attribute-synchronization.html#h2_1939259882" class="CHHeadingLink" title="Link to this heading" aria-hidden="true"></a></h2>
  <p>
    CloudBolt comes with a sync action enabled by default that can automatically grant CloudBolt permissions to a user based on their LDAP permissions. For each LDAP utility you create in CloudBolt, you will need to map its OUs and groups to their equivalent CloudBolt Groups and Roles.
  </p>
  <p>
    To set up the user permission sync, you’ll need to create some mappings:
  </p>
  <blockquote>
    <div>
      <ol>
        <li>
          Go to&nbsp;Admin&nbsp;→&nbsp;Security&nbsp;→&nbsp;LDAP Authentication Settings&nbsp;→ your LDAP utility.
        </li>
        <li>
          Click the New LDAP Mapping button on the Mappings tab. The first dialog lets you select the LDAP OU and group that the user must match in order to receive CloudBolt roles. You’ll need the full LDAP distinguished name, which can be found in the object’s properties in AD. If this mapping will grant any global roles, you will also set those here.
        </li>
        <li>
          Next, click the Add Group Roles link on your newly created mapping. This dialog lets you select a CloudBolt group and the roles that should be granted in that group. This link will not show for Super Admin mappings.
        </li>
        <li>
          Repeat step 3 as necessary if you want this mapping to grant roles in multiple groups.
        </li>
        <li>
          To test your mappings, click the Sync Mappings button. You’ll be able to select a user and do a dry run of the sync action to see which roles the user would receive.
        </li>
      </ol>
    </div>
  </blockquote>
  <p>
    Roles granted by mappings are additive: if a user is be impacted by more than one mapping, they will receive all the roles in each mapping.
  </p>
  <p>
    If using Active Directory, note that the user’s primary group is not used when applying mappings.
  </p>
</div>
<div id="synchronizing-user-attributes-from-ldap">
  <h2 id="h2_1364829566" data-has-heading-anchor="true">
    Synchronizing User Attributes from LDAP
  <a href="user-permission-and-attribute-synchronization.html#h2_1364829566" class="CHHeadingLink" title="Link to this heading" aria-hidden="true"></a></h2>
  <p>
    In addition to synchronizing permissions and group membership from LDAP, CloudBolt can also synchronize user attributes. To set this up:</p><ol><li>Go to&nbsp;Admin&nbsp;→&nbsp;LDAP Authentication Settings&nbsp;→ your LDAP utility →&nbsp;Attribute Mappings&nbsp;tab.</li><li>Click the New LDAP Mapping button. This will allow you to map the name of an attribute in LDAP with a parameter in CloudBolt.</li><li>To test your mappings, click the Sync Mappings button. You’ll be able to select a user and do a dry run of the sync action to see which parameter values would be added to the user profile.</li></ol>
  <p>
    Parameters that have the “show on objects” attribute set to true will be displayed on the user’s details page.
  </p>
  <p>
    Once parameters have been set on users, they can be used in actions. CloudBolt ships with an example plug-in that utilizes parameters. This plug-in can be seen at&nbsp;Admin&nbsp;→&nbsp;Orchestration Actions&nbsp;→&nbsp;Provision Server&nbsp;→&nbsp;Sample Per-User Server Limits.
  </p>
  <p>
    To use this to control the maximum number of servers each user can own in CloudBolt by setting an attribute in LDAP:</p><ol><li>Enable the aforementioned action</li><li>Create a custom field of type Integer called&nbsp;<i><span style="font-family: Arial, &quot;Helvetica Neue&quot;, Helvetica, sans-serif;">max_servers</span>&nbsp;</i>with&nbsp;<cite><span style="font-style: normal;"><span style="font-family: Arial, &quot;Helvetica Neue&quot;, Helvetica, sans-serif;">show on objects</span>&nbsp;set to True.</span></cite></li><li>Create attributes in LDAP on the users you want to have a server limit on that is different than the default defined in</li><li>Create a mapping to map the LDAP attribute you created to the&nbsp;<i><span style="font-family: Arial, &quot;Helvetica Neue&quot;, Helvetica, sans-serif;">max_servers</span>&nbsp;</i>parameter in CloudBolt</li><li>Sync Mappings and then go to the user’s details page to make sure the parameter is properly set.</li><li>Test setting the limit to 0 in LDAP, then log in as that user and try to provision a server.</li><li>The&nbsp;<i>Sample Per-User Server Limits&nbsp;</i>action will cause the provisioning job to fail before it takes any action.</li></ol>
  <p>
    This action is one specific example of how attributes synchronized from LDAP to parameters on servers in CloudBolt can be used, but this feature can be used to solve any case where data needs copied from LDAP to user profiles in CloudBolt and then used programmatically.
  </p>
</div>
<div id="creating-custom-actions">
  <h2 id="h2_1323855563" data-has-heading-anchor="true">
    Creating Custom Actions
  <a href="user-permission-and-attribute-synchronization.html#h2_1323855563" class="CHHeadingLink" title="Link to this heading" aria-hidden="true"></a></h2>
  <p>
    To manage the external user sync actions, navigate in the UI to&nbsp;Admin&nbsp;→&nbsp;Orchestration Actions&nbsp;→&nbsp;Other&nbsp;→&nbsp;External Users Sync. You can use the default CloudBolt action as a sample when developing your own action. If you modify it, we recommend first duplicating it, and then modifying the new one you created.
  </p>
  <p>
    You can also look in&nbsp;<a href="https://github.com/CloudBoltSoftware/cloudbolt-forge/tree/master/actions/cloudbolt_plugins/external_user_sync" target="_top">the CloudBolt Forge</a>&nbsp;for additional examples.
  </p>
</div>
<div id="testing-it">
  <h2 id="h2_1339110283" data-has-heading-anchor="true">
    Testing It
  <a href="user-permission-and-attribute-synchronization.html#h2_1339110283" class="CHHeadingLink" title="Link to this heading" aria-hidden="true"></a></h2>
  <p>
    You could test your newly enabled external user sync action by logging out and logging in, but that takes some time, and, if your plugin has significant problems, it could prevent login.
  </p>
  <p>
    <span style="font-family: Arial, &quot;Helvetica Neue&quot;, Helvetica, sans-serif;">A faster, safer way to test is to navigate to&nbsp;<b>Admin</b>&nbsp;→&nbsp;<b>Users</b>, click on an external user you can test with, and click the&nbsp;</span><i><span style="font-family: Arial, &quot;Helvetica Neue&quot;, Helvetica, sans-serif;">Sync External User</span>&nbsp;</i>button. We recommended using a user account that is not the one you are logged in as, because a problematic sync could remove your admin permissions and prevent you from testing further.
  </p>
  <p>
    You can also sync all users at once using the Mappings tab on the LDAP utility page. This will only sync users who have already logged into CloudBolt at some point in the past. Note that the dialog may take a long time to process if you are syncing a large number of users.
  </p>
</div>
<div>
</div>  <div class="articleActions row pt-4 mt-5 mb-4 ml-0">
    <div class="col-6">
      <span class="CHNavCaption">Previous Topic</span><a href="global-roles.html" class="articleActions_link CHNavLinkPrevious">Global Roles</a>
    </div>
    <div class="col-6 text-right">
      <span class="CHNavCaption">Next Topic</span><a href="security.html" class="articleActions_link CHNavLinkNext">Security</a>
    </div>
  </div>
</div>
<!-- END ARTICLE CONTAINER -->
<!-- FOOTER -->
<div class="footer">
  <div class="footerInner">
    <div class="container">
      <div class="row">
        <div class="col-6">
          <div class="row">
            <div class="col-12">
              <a href="https://www.cloudbolt.io/" target="_blank">
                <img src="../Storage/cloudbolt-docs/logos/cb-horizontal-white.svg" class="img-fluid footerLogo" alt="CloudBolt"/>
              </a>
            </div>
          </div>
          <div class="row mt-4">
            <div class="col-12">
              <a class="btn btn-social" href="mailto:support@cloudbolt.io" role="button" target="_top">
                <span class="btn-icon"><i class="mdi mdi-face-agent"></i></span>
                support@cloudbolt.io
              </a>
            </div>
          </div>
        </div>
        <div class="col-6">
          <p class="footerTitle">
            About the Company
          </p>
          <p class="footerAbout" data-children-count="1">
            CloudBolt&#39;s hybrid cloud platform for enterprises helps IT admins provide simple to very complex IT resources to end users from a single portal.
          </p>
          <ul class="socials">
            <li class="mr-3">
              <a class="social-link" href="https://www.facebook.com/CloudBoltSoftware/" target="_blank" title="Facebook">
                <i class="mdi mdi-facebook"></i>
              </a>
            </li>
            <li class="mr-3">
              <a class="social-link" href="https://twitter.com/CloudBoltSW" target="_blank" title="Twitter">
                <i class="mdi mdi-twitter"></i>
              </a>
            </li>
            <li class="mr-3">
              <a class="social-link" href="https://www.linkedin.com/company/cloudbolt/" target="_blank" title="LinkedIn">
                <i class="mdi mdi-linkedin"></i>
              </a>
            </li>
            <li>
              <a class="social-link" href="https://github.com/CloudBoltSoftware/cloudbolt-forge" target="_blank" title="GitHub">
                <i class="mdi mdi-github"></i>
              </a>
            </li>
          </ul>
        </div>
      </div>
      <div class="row mt-4">
        <div class="col-12 text-center">
          <span class="copyright mt-5" data-children-count="1">© CloudBolt Software. All rights reserved</span>
        </div>
      </div>
    </div>
  </div>
</div>
<script type="text/javascript">
  if (window['initFooter']) {
    initFooter();
  }
</script>
<!-- SCRIPTS -->
<script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>
<script src="../Scripts/project-cloudbolt-docs/lightbox-plus-jquery.min.js"></script>
          </div>
        </article>
      </div>
    </div>
  </div>  
</body>
</html>
