{% extends "base.html" %}
{% load i18n %}
{% load helper_tags %}

{% block topnav %}admin{% endblock %}

{% block content %}
    <span class="uplink"><a href="{% url 'admin_home' %}">Admin</a></span>
    <h1>{% trans "Alert Channels" %}</h1>

    <section class="intro">
        <p>
        {% portal_label as portal_lbl %}
        {% blocktrans %}
            Configure Alert Channels to indicate where the Multi-Channel Alerts generated by either
            {{ portal_lbl }}'s out-of-the-box events or your custom code should be sent. They can be of
            different types with different destinations, and are associated with alert categories.
            When an alert is sent to a particular category, {{ portal_lbl }} will determine which Alert Channels are
            associated with that category and route notifications appropriately.
        {% endblocktrans %}
        {% include 'common/docs_link.html' with url="multi-channel-alerts.html" %}
        </p>
    </section>

    <div class="btn-toolbar">
        <a class="btn btn-default open-dialog"
            href="{% url 'create_alert_channel_type' %}">
            <span class="icon-add"></span>
            {% trans "New Alert Channel" %}
        </a>
    </div>

    <table id="alertchannels-table" data-table
        ng-non-bindable>
        <thead>
            <tr>
                <th>{% trans "Name" %}</th>
                <th>{% trans "Categories" %}
                <th>{% trans "Destinations" %}</th>
                <th>{% trans "Actions" %}</th>
            </tr>
        </thead>
        <tbody>

        {% for channel in alert_channels %}
            <tr>
                <td class="shrink">
                    <i class="{{ channel.class_icon }}"></i>
                    {{ channel.name }}
                </td>

                <td class="shrink">
                    {{ channel.alert_categories|to_csv }}
                </td>

                <td class="shrink">
                    {{ channel.destinations|to_csv }}
                </td>

                <td class="shrink">
                    <div class="btn-group">
                        <a class="icon-edit btn btn-default btn-sm open-dialog"
                            href="{% url 'edit_alert_channel' channel.id %}"></a>
                        <a class="icon-delete btn btn-default btn-sm open-dialog"
                            href="{% url 'delete_alert_channel' channel.id %}"></a>
                    </div>
                </td>
            </tr>
        {% endfor %}
        </tbody>
    </table>
{% endblock %}